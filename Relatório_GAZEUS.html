<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Fernanda Kelly R. Silva">

<title>Teste Técnico</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Relatório_GAZEUS_files/libs/clipboard/clipboard.min.js"></script>
<script src="Relatório_GAZEUS_files/libs/quarto-html/quarto.js"></script>
<script src="Relatório_GAZEUS_files/libs/quarto-html/popper.min.js"></script>
<script src="Relatório_GAZEUS_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Relatório_GAZEUS_files/libs/quarto-html/anchor.min.js"></script>
<link href="Relatório_GAZEUS_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Relatório_GAZEUS_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="Relatório_GAZEUS_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="Relatório_GAZEUS_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Relatório_GAZEUS_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Relatório_GAZEUS_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="Relatório_GAZEUS_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#tarefa-01-sql" id="toc-tarefa-01-sql" class="nav-link active" data-scroll-target="#tarefa-01-sql">Tarefa 01: SQL</a>
  <ul class="collapse">
  <li><a href="#tabela_transactions" id="toc-tabela_transactions" class="nav-link" data-scroll-target="#tabela_transactions">tabela_transactions</a></li>
  <li><a href="#tabela_user" id="toc-tabela_user" class="nav-link" data-scroll-target="#tabela_user">tabela_user</a></li>
  </ul></li>
  <li><a href="#tarefa-02-python" id="toc-tarefa-02-python" class="nav-link" data-scroll-target="#tarefa-02-python">Tarefa 02: Python</a></li>
  <li><a href="#tarefa-03-estatística-e-machine-learning" id="toc-tarefa-03-estatística-e-machine-learning" class="nav-link" data-scroll-target="#tarefa-03-estatística-e-machine-learning">Tarefa 03: Estatística e Machine Learning</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Teste Técnico</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Código</button></div></div>
<p class="subtitle lead"><strong>Posição de Data Analyst Jr - Buraco Jogatina</strong></p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Fernanda Kelly R. Silva </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Data de Publicação</div>
    <div class="quarto-title-meta-contents">
      <p class="date">24/03/2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="tarefa-01-sql" class="level1">
<h1>Tarefa 01: SQL</h1>
<p>Um sistema de pagamentos, registra as transações dos seus usuários em duas tabelas:</p>
<p>Users: Contém o registro de usuários do sistema. Os seus atributos são:</p>
<ul>
<li>id: Identificador único de usuário</li>
<li>age (idade): em anos</li>
<li>país de residência: país onde o usuários indicou que reside</li>
</ul>
<p>Transactions: Que contém o registro de todas as transações que os usuários realizam através do sistema.</p>
<ul>
<li>transaction_id: Identificador único da transação</li>
<li>transaction_date: Data na qual a transação foi realizada. O tipo é timestamp, ou seja, é um tipo de data que contém o ano, mês, dia, hora, minuto e segundos.</li>
<li>user_id: Identificador do usuário que realizou a transação (é uma chave externa à tabela users)</li>
<li>transaction_state: Campo que indica o estado da transação que pode ser <em>INITIATED</em>, <em>SUCCESS</em>, <em>FRAUD</em> or <em>CANCELLED</em>.</li>
<li>transaction_amount: Valor da transação em USD</li>
</ul>
<p>Com estes dados disponíveis, precisamos gerar queries SQL para responder às seguintes perguntas. <strong>Para fins didáticos, criei esses bancos de dados para simular a resolução das questões.</strong></p>
<section id="tabela_transactions" class="level3">
<h3 class="anchored" data-anchor-id="tabela_transactions">tabela_transactions</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(tabela_transactions)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 25%">
<col style="width: 15%">
<col style="width: 18%">
<col style="width: 20%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">user_id</th>
<th style="text-align: left;">transaction_date</th>
<th style="text-align: left;">transaction_id</th>
<th style="text-align: left;">transaction_state</th>
<th style="text-align: right;">transaction_amount</th>
<th style="text-align: left;">data_curta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">2024-03-12 15:08:49 UTC</td>
<td style="text-align: left;">255</td>
<td style="text-align: left;">sucesso</td>
<td style="text-align: right;">119.65</td>
<td style="text-align: left;">2024-03-12</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2024-03-23 20:08:03 UTC</td>
<td style="text-align: left;">585</td>
<td style="text-align: left;">INITIATED</td>
<td style="text-align: right;">22.63</td>
<td style="text-align: left;">2024-03-23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">2024-03-18 10:56:25 UTC</td>
<td style="text-align: left;">178</td>
<td style="text-align: left;">CANCELLED</td>
<td style="text-align: right;">225.87</td>
<td style="text-align: left;">2024-03-18</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">2024-03-12 08:21:32 UTC</td>
<td style="text-align: left;">887</td>
<td style="text-align: left;">SUCCESS</td>
<td style="text-align: right;">16.58</td>
<td style="text-align: left;">2024-03-12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">2024-03-30 05:24:49 UTC</td>
<td style="text-align: left;">569</td>
<td style="text-align: left;">FRAUD</td>
<td style="text-align: right;">1225.89</td>
<td style="text-align: left;">2024-03-30</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">2024-03-21 12:32:51 UTC</td>
<td style="text-align: left;">789</td>
<td style="text-align: left;">SUCCESS</td>
<td style="text-align: right;">59.90</td>
<td style="text-align: left;">2024-03-21</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">2024-03-10 08:25:49 UTC</td>
<td style="text-align: left;">236</td>
<td style="text-align: left;">FRAUD</td>
<td style="text-align: right;">256.98</td>
<td style="text-align: left;">2024-03-10</td>
</tr>
<tr class="even">
<td style="text-align: left;">7</td>
<td style="text-align: left;">2024-03-10 05:21:49 UTC</td>
<td style="text-align: left;">458</td>
<td style="text-align: left;">FRAUD</td>
<td style="text-align: right;">986.69</td>
<td style="text-align: left;">2024-03-10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">2024-03-09 01:08:49 UTC</td>
<td style="text-align: left;">125</td>
<td style="text-align: left;">FRAUD</td>
<td style="text-align: right;">1256.89</td>
<td style="text-align: left;">2024-03-09</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="tabela_user" class="level3">
<h3 class="anchored" data-anchor-id="tabela_user">tabela_user</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(tabela_user)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: left;">age</th>
<th style="text-align: left;">pais</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">Brasil</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">29</td>
<td style="text-align: left;">Estados Unidos</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">55</td>
<td style="text-align: left;">África do Sul</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">32</td>
<td style="text-align: left;">Bolívia</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">60</td>
<td style="text-align: left;">Brasil</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">42</td>
<td style="text-align: left;">Brasil</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">38</td>
<td style="text-align: left;">África do Sul</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Para que a experiência do SQL seja real, vou conectar as bases com o SQLite.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-3"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-3-1"><a href="#annotated-cell-3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dbplyr)</span>
<span id="annotated-cell-3-2"><a href="#annotated-cell-3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="annotated-cell-3-3"><a href="#annotated-cell-3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-3-4"><a href="#annotated-cell-3-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">":memory:"</span>)</span>
<span id="annotated-cell-3-5"><a href="#annotated-cell-3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">copy_to</span>(con, tabela_user)</span>
<span id="annotated-cell-3-6"><a href="#annotated-cell-3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">copy_to</span>(con, tabela_transactions)</span>
<span id="annotated-cell-3-7"><a href="#annotated-cell-3-7" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="1">1</button><span id="annotated-cell-3-8" class="code-annotation-target"><a href="#annotated-cell-3-8" aria-hidden="true" tabindex="-1"></a>tabela_user <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">"tabela_user"</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="2">2</button><span id="annotated-cell-3-9" class="code-annotation-target"><a href="#annotated-cell-3-9" aria-hidden="true" tabindex="-1"></a>tabela_transactions <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">"tabela_transactions"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-3" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="8" data-code-annotation="1">Conectando a base de dados {tabela_user} com o SQLite</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="9" data-code-annotation="2">Conectando a base de dados {tabela_transactions} com o SQLite</span>
</dd>
</dl>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">A</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">B</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">C</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">D</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">E</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Qual é a idade média de usuários do sistema por país?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> `pais`, <span class="fu">ROUND</span>(<span class="fu">AVG</span>(`age`), <span class="dv">2</span>) <span class="kw">AS</span> `media_idade`</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> `tabela_user`</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> `pais`</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Qual é o país com a maior quantidade de dinheiro transacionado (considere só transações finalizadas com sucesso ou “SUCCESS”)?</p>
<p>Como vamos precisar do merge das duas tabelas, vou criar a <strong>tabela_merge</strong> sem algum filtro para facilitar as consultas e não alocar memória desnecessária.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tabela_merge <span class="ot">&lt;-</span> tabela_transactions <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                 dplyr<span class="sc">::</span><span class="fu">left_join</span>(tabela_user, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"user_id"</span> <span class="ot">=</span> <span class="st">"id"</span>)) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  `user_id`,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  `transaction_date`,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  `transaction_id`,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  `transaction_state`,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  `transaction_amount`,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  `data_curta`,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  `age`,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  `pais`</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> `q01`.<span class="op">*</span>, <span class="fu">RANK</span>() <span class="kw">OVER</span> (<span class="kw">ORDER</span> <span class="kw">BY</span> `transaction_amount` <span class="kw">DESC</span>) <span class="kw">AS</span> `col01`</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> `tabela_transactions`.<span class="op">*</span>, `age`, `pais`</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> `tabela_transactions`</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">LEFT</span> <span class="kw">JOIN</span> `tabela_user`</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>      <span class="kw">ON</span> (`tabela_transactions`.`user_id` <span class="op">=</span> `tabela_user`.`id`)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> `q01`</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> (`transaction_state` <span class="op">=</span> <span class="st">'SUCCESS'</span> <span class="kw">OR</span> `transaction_state` <span class="op">=</span> <span class="st">'sucesso'</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> `q01`</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (`col01` <span class="op">&lt;=</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Qual é o país com maior taxa de fraude em porcentagem respeito ao número de transações totais no país?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  `user_id`,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  `transaction_date`,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  `transaction_id`,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  `transaction_state`,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  `transaction_amount`,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  `data_curta`,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  `age`,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  `pais`,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  `taxa`</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> `q01`.<span class="op">*</span>, <span class="fu">RANK</span>() <span class="kw">OVER</span> (<span class="kw">ORDER</span> <span class="kw">BY</span> `taxa` <span class="kw">DESC</span>) <span class="kw">AS</span> `col01`</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      `q01`.<span class="op">*</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>      `transaction_amount` <span class="op">/</span> <span class="fu">SUM</span>(`transaction_amount`) <span class="kw">OVER</span> (<span class="kw">PARTITION</span> <span class="kw">BY</span> `transaction_state`) <span class="kw">AS</span> `taxa`</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SELECT</span> `tabela_transactions`.<span class="op">*</span>, `age`, `pais`</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>      <span class="kw">FROM</span> `tabela_transactions`</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      <span class="kw">LEFT</span> <span class="kw">JOIN</span> `tabela_user`</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ON</span> (`tabela_transactions`.`user_id` <span class="op">=</span> `tabela_user`.`id`)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="kw">AS</span> `q01`</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> `q01`</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> (`transaction_state` <span class="op">=</span> <span class="st">'FRAUD'</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> `q01`</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (`col01` <span class="op">&lt;=</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>Na mesma linha da pergunta anterior, responda qual é a faixa de idade de usuários que mais cometem fraude (em percentagem). Separe as faixas etárias em: (&lt; 18 anos, 18-30 anos, 30 - 45 anos, 45 - 60 anos, 60 &gt; anos) e considere que para responder essa pergunta, você deverá considerar o fato que um usuário pode ter executado várias transações, das quais poucas (ou muitas) podem ter sido fraude entre as demais.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  `user_id`,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  `transaction_date`,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  `transaction_id`,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  `transaction_state`,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  `transaction_amount`,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  `data_curta`,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  `age`,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  `pais`,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  `age_cat`,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  `taxa_idade`</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> `q01`.<span class="op">*</span>, <span class="fu">RANK</span>() <span class="kw">OVER</span> (<span class="kw">ORDER</span> <span class="kw">BY</span> `taxa_idade` <span class="kw">DESC</span>) <span class="kw">AS</span> `col01`</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>      `q01`.<span class="op">*</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">CASE</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (`age` <span class="op">&lt;</span> <span class="fl">18.0</span>) <span class="cf">THEN</span> <span class="st">'menor que 18 anos'</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (`age` <span class="op">&gt;=</span> <span class="fl">18.0</span> <span class="kw">AND</span> `age` <span class="op">&lt;</span> <span class="fl">30.0</span>) <span class="cf">THEN</span> <span class="st">'18-29 anos'</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (`age` <span class="op">&gt;=</span> <span class="fl">30.0</span> <span class="kw">AND</span> `age` <span class="op">&lt;</span> <span class="fl">45.0</span>) <span class="cf">THEN</span> <span class="st">'30-44 anos'</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (`age` <span class="op">&gt;=</span> <span class="fl">45.0</span> <span class="kw">AND</span> `age` <span class="op">&lt;</span> <span class="fl">60.0</span>) <span class="cf">THEN</span> <span class="st">'45-59 anos'</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (`age` <span class="op">&gt;=</span> <span class="fl">60.0</span>) <span class="cf">THEN</span> <span class="st">'maior igual a 60 anos'</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="cf">END</span> <span class="kw">AS</span> `age_cat`,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>      <span class="cf">CASE</span> <span class="cf">WHEN</span> (`transaction_state` <span class="op">=</span> <span class="st">'FRAUD'</span>) <span class="cf">THEN</span> (`transaction_amount` <span class="op">/</span> <span class="fu">SUM</span>(`transaction_amount`) <span class="kw">OVER</span> ()) <span class="cf">WHEN</span> <span class="kw">NOT</span> (`transaction_state` <span class="op">=</span> <span class="st">'FRAUD'</span>) <span class="cf">THEN</span> <span class="fl">0.0</span> <span class="cf">END</span> <span class="kw">AS</span> `taxa_idade`</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SELECT</span> `tabela_transactions`.<span class="op">*</span>, `age`, `pais`</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>      <span class="kw">FROM</span> `tabela_transactions`</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>      <span class="kw">LEFT</span> <span class="kw">JOIN</span> `tabela_user`</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ON</span> (`tabela_transactions`.`user_id` <span class="op">=</span> `tabela_user`.`id`)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="kw">AS</span> `q01`</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> `q01`</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> `q01`</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (`col01` <span class="op">&lt;=</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<p>Imagine que a camada executiva da empresa dona do sistema, precisa criar um Dashboard para monitorar o estado das transações nos últimos 3 dias. Para isso você precisa criar uma query SQL que calcule o número e dinheiro das transações não finalizadas, número e dinheiro de transações finalizadas com sucesso (SUCCESS), o número e dinheiro de transações canceladas (CANCELLED), o número e dinheiro de fraudes (FRAUD), agrupado por país, nos 3 dias anteriores de quando o executivo da empresa consulte seu Dashboard.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  `q01`.<span class="op">*</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">OVER</span> `win1` <span class="kw">AS</span> `n_transacoes`,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">SUM</span>(`transaction_amount`) <span class="kw">OVER</span> `win1` <span class="kw">AS</span> `dinheiro`</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    `user_id`,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    `transaction_date`,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    `transaction_id`,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> (`transaction_state` <span class="op">=</span> <span class="st">'sucesso'</span>) <span class="cf">THEN</span> <span class="st">'SUCCESS'</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> (`transaction_state` <span class="op">=</span> <span class="st">'sucesso'</span>) <span class="cf">THEN</span> `transaction_state` <span class="cf">END</span> <span class="kw">AS</span> `transaction_state`,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    `transaction_amount`,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    `data_curta`,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    `age`,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    `pais`,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    `tres_n`</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>      `q01`.<span class="op">*</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">CASE</span> <span class="cf">WHEN</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">1.0</span>) <span class="op">=</span> `data_curta`) <span class="cf">THEN</span> <span class="fl">1.0</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">1.0</span>) <span class="op">=</span> `data_curta`) <span class="cf">THEN</span> (<span class="cf">CASE</span> <span class="cf">WHEN</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> `data_curta`) <span class="cf">THEN</span> <span class="fl">1.0</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> `data_curta`) <span class="cf">THEN</span> (<span class="cf">CASE</span> <span class="cf">WHEN</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> `data_curta`) <span class="cf">THEN</span> <span class="fl">1.0</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> `data_curta`) <span class="cf">THEN</span> <span class="fl">0.0</span> <span class="cf">END</span>) <span class="cf">END</span>) <span class="cf">END</span> <span class="kw">AS</span> `tres_n`</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SELECT</span> `tabela_transactions`.<span class="op">*</span>, `age`, `pais`</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>      <span class="kw">FROM</span> `tabela_transactions`</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>      <span class="kw">LEFT</span> <span class="kw">JOIN</span> `tabela_user`</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ON</span> (`tabela_transactions`.`user_id` <span class="op">=</span> `tabela_user`.`id`)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    ) <span class="kw">AS</span> `q01`</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> `q01`</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> (`tres_n` <span class="op">=</span> <span class="fl">1.0</span>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> `q01`</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>WINDOW `win1` <span class="kw">AS</span> (<span class="kw">PARTITION</span> <span class="kw">BY</span> `pais`, `transaction_state`)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="tarefa-02-python" class="level1">
<h1>Tarefa 02: Python</h1>
<p>Numa tribo ancestral e muito desenvolvida, orientada principalmente por uma cultura lógica e matemática, os nativos estão interessados no estudo das linguagens de outras tribos e civilizações.</p>
<p>Durante seus estudos, estes perceberam que as linguagens dessas outras civilizações são compostas por um conjunto de símbolos (letras do alfabeto) que são agrupados e combinados para representar conceitos (palavras). Assim mesmo, estes também sabem que cada civilização possui um alfabeto específico.</p>
<p>Na tentativa da tribo de avançar nos seus estudos, estes desejam saber qual seria o número de palavras possíveis a serem criadas em função do tamanho da palavra e o conjunto de símbolos (alfabeto) da civilização em estudo, independentemente se essas “palavras” representam algum significado ou não.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">A</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">B</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Você, que compartilha os atributos da tribo enquanto as capacidades analíticas e lógicas, precisa ajudá-la escrevendo um algoritmo para fazer o cálculo descrito acima, considerando que tribo oferecerá para você o alfabeto da civilização e o tamanho da palavra/combinação. Seu algoritmo deveria ser capaz de calcular que o número total de palavras possíveis (independente se tem significado ou não) é de 16.</p>
<p>OBS: NÃO PRECISA ESCREVER A LISTA DAS PALAVRAS, A TRIBO SÓ PRECISA DO NÚMERO!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">
<p>Esse é um claro problema de análise combinatória com reposição/reposição.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement,chain</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtem todas as combinações de [1, 2, 3] e tamanho 2</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>comb_A <span class="op">=</span> combinations_with_replacement([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">2</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(<span class="bu">list</span>(comb_A)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>6</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>Para ajudar a tribo ainda mais! Você deverá modificar seu algoritmo (ou talvez escrever um novo) para fazer o mesmo cálculo, só que agora, as palavras não podem ter símbolos repetidos.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">
<p>Esse também é um claro problema de análise combinatória, mas, nesse caso, é um problema em que <strong>não há reposição</strong>.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtem todas as permutações de {@,d,2,b}  </span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>comb_B <span class="op">=</span> combinations([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">2</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(<span class="bu">list</span>(comb_B)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-03-estatística-e-machine-learning" class="level1">
<h1>Tarefa 03: Estatística e Machine Learning</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false" href="">4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-5" role="tab" aria-controls="tabset-4-5" aria-selected="false" href="">5</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-6" role="tab" aria-controls="tabset-4-6" aria-selected="false" href="">6</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-7" role="tab" aria-controls="tabset-4-7" aria-selected="false" href="">7</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-8" role="tab" aria-controls="tabset-4-8" aria-selected="false" href="">8</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Dado um dataset das estaturas (em centímetros) de 13 indivíduos:</p>
<p>Dataset = {175, 166, 183, 193, 155, 177, 173, 171, 162, 185, 176, 161, 188}</p>
<p>Calcule:</p>
<ul>
<li>a média</li>
<li>a mediana</li>
<li>20 percentil</li>
<li>80 percentil</li>
<li>desvio padrão</li>
</ul>
<p>Considerando os dados, responda a que distribuição (paramétrica) os dados se aproximam.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">vinte_percentil</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">median</th>
<th style="text-align: right;">oitenta_percentil</th>
<th style="text-align: right;">desvio_padrao</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">163.6</td>
<td style="text-align: right;">174.2308</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">184.2</td>
<td style="text-align: right;">11.25577</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>De acordo com o gráfico abaixo, a distribuição da variável <strong>altura</strong> pode ser descrita por uma normal, mas para fins de decisão, deve-se munir de testes paramétricos ou não paramétricos. Veja que sua variabilidade indica que os valores observados tendem a estar distantes da média – ou seja, a distribuição é mais “espalhada”.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Relatório_GAZEUS_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(dataset<span class="sc">$</span>altura)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(dataset<span class="sc">$</span>altura, <span class="at">col=</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Relatório_GAZEUS_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>Com suas próprias palavras, explique em que consiste o teorema central do limite, e se possível, mencione a sua importância no campo da inferência estatística.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>O Teorema do limite central (TLC) basicamente demonstra a <strong>tendência</strong> de aproximação das variáveis aleatórias com a distribuição normal, em que a aproximação da distribuição Normal melhora na medida que se fizesse a média do lançamento de mais dados. Esse comportamento pode ser visualizado na imagem abaixo. Na estatística, há provas que um n igual a 30 é suficientemente grande para que essa amostra seja descrita com uma distribuição normal e, por isso, é fácil encontrar análises clássicas com todos os pressupostos violados por seus pesquisadores devido a esta pressuposição do n igual a 30.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/img213.png" class="img-fluid figure-img" width="300"></p>
<figcaption>Teorema do Limite Central</figcaption>
</figure>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<p>Suponha que numa escola, 2 grupos diferentes de estudantes (Grupo A e Grupo B) fazem o mesmo teste de matemáticas. As pontuações para cada grupo são dados pelos seguintes datasets:</p>
<ul>
<li>Grupo A: {80, 85, 88, 90, 92, 75, 78}</li>
<li>Grupo B: {75, 78, 82, 85, 87, 93, 99}</li>
</ul>
<p>Elabore um teste de hipótese para determinar se existe uma diferença estatisticamente significativa entre a média das pontuações dos dois grupos com uma confiança de 95%.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p><strong>Antes de qualquer levantamento de hipótese, é bom analisar as medidas de tendência central de cada grupo e também graficamente</strong> e, de acordo com a tabela abaixo, não há muitas evidências de que essa média entre os grupos seja diferente, mas é evidente que o <strong>grupo B</strong> tem uma variabilidade maior em relação as notas (desvio padrão = 8.363754).</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">vinte_percentil</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">median</th>
<th style="text-align: right;">oitenta_percentil</th>
<th style="text-align: right;">desvio_padrao</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">163.6</td>
<td style="text-align: right;">174.2308</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">184.2</td>
<td style="text-align: right;">11.25577</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Relatório_GAZEUS_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>É importante ressaltar que a verificação dos pressupostos é de extrema relevância para que os insights e conclusões sejam verdadeiramente corretos. Neste casso, estamos <strong>supondo </strong> que as duas amostras são independentes e, em caso de teste de médias, usaríamos o teste t independente que apresenta dois <strong>pressupostos</strong>:</p>
<ul>
<li><strong>Normalidade da variável dependente de cada grupo</strong></li>
<li><strong>Homogeneidade de variâncias (ou seja, grupos com variâncias homogêneas)</strong></li>
</ul>
<section id="normalidade" class="level3">
<h3 class="anchored" data-anchor-id="normalidade">Normalidade</h3>
<p>Para verificar a normalidade dos dados, é recomendável utilizar o teste de <strong>Shapiro WIlk</strong> quando o número de amostra é menor que 50. A estatı́stica T (ou T ) é basicamente o quadrado de um coeficiente de correlação, onde o coeficiente de correlação de Pearson é calculado entre a estatı́stica ordenada X i na amostra e o escore ai , que representa o que a estatı́stica ordenada deveria parecer se a população é Normal. Portanto, as hipóteses levantadas são:</p>
<p><span class="math inline">\(H_{0}\)</span> : F(x) é função de distribuição normal; <span class="math inline">\(H_{1}\)</span> : F(x) não é função de distribuição normal;</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">grupo</th>
<th style="text-align: left;">variable</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">nota</td>
<td style="text-align: right;">0.9434822</td>
<td style="text-align: right;">0.6702574</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">nota</td>
<td style="text-align: right;">0.9727151</td>
<td style="text-align: right;">0.9172920</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Veja que de acordo com o teste de Shapiro Wilk, ao nível de 95% de significância, <strong>não rejeita-se a hipótese nula</strong>, ou seja, a variável <strong>notas</strong> é descrita por uma distribuição normal.</p>
</section>
<section id="variância" class="level3">
<h3 class="anchored" data-anchor-id="variância">Variância</h3>
<p>O segundo pressuposto pode ser avaliado pelo <strong>teste de Levene</strong>, em que as hipóteses são:</p>
<p><span class="math inline">\(H_{0}\)</span> : Os grupos apresentam variâncias homogêneas; <span class="math inline">\(H_{1}\)</span> : Os grupos não apresentam variâncias homogêneas;</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Df</th>
<th style="text-align: right;">F value</th>
<th style="text-align: right;">Pr(&gt;F)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">group</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.2060638</td>
<td style="text-align: right;">0.657971</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Logo, ao nível de 95% de significância, <strong>não rejeitamos a hipótese nula</strong>, ou seja, os grupos apresentam variâncias homogêneas e assim podemos seguir com o teste t independente.</p>
<p>Seguindo os passos para elaboração de um teste de hipótese:</p>
<ol type="1">
<li>Enunciar as Hipóteses:</li>
</ol>
<ul>
<li><span class="math inline">\(H_{0}\)</span> : Não há diferença média entre os grupos;</li>
<li><span class="math inline">\(H_{1}\)</span> : Há diferença média entre os grupos;</li>
</ul>
<ol start="2" type="1">
<li>Fixar o nı́vel de significância <span class="math inline">\(\alpha\)</span>) do teste:</li>
</ol>
<p><strong>No nosso caso, o nível de significância será 95%.</strong></p>
<ul>
<li><span class="math inline">\(\alpha\)</span> : Erro tipo I: Rejeitar <span class="math inline">\(H_{0}\)</span> quando é verdadeira.</li>
</ul>
<ol start="3" type="1">
<li>Escolha da Estatı́stica teste adequada:</li>
</ol>
<p>Para responder a essa pergunta, usaremos o teste-t independente. Note que queremos comparar as notas (variáveis numéricas) de dois grupos independentes de alunos (A x B).</p>
<ol start="4" type="1">
<li>Obtenção dos valores crı́ticos e Obtenção da Estatı́stica calculada:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
    Two Sample t-test

data:  nota by grupo
t = -0.39353, df = 12, p-value = 0.7008
alternative hypothesis: true difference in means between group A and group B is not equal to 0
95 percent confidence interval:
 -10.271845   7.128988
sample estimates:
mean in group A mean in group B 
       84.00000        85.57143 </code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Conclusão e tomada de decisão</li>
</ol>
<p>O teste resulta em um valor de t (no caso, t = -0.3935) e um valor de p (p-value) que é calculado com base nesse valor de t e nos graus de liberdade (df, do inglês degrees of freedom). Nesse caso, o valor de p é: 0.7008, um valor superior ao nível de significância 0.05. Como p &gt; 0.05, não vamos rejeitar a <span class="math inline">\(H_{0}\)</span> e considerar que os dois grupos que apresentam notas, em média, não são estatisticamente diferentes. Veja que o IC 95% para a diferença entre médias inclui o zero: [-10.27; 7.12].</p>
</section>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<p>Determine a hipótese nula (Ho) e hipótese alternativa (Ha) do seguinte cenário: Uma empresa afirma que o tempo médio dos seus produtos é menos de 4 dias. Você, conta com uma amostra dessas entregas para validar estadísticamente essa afirmação.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>Não é possível avaliar os pressupostos dessa amostra, mas considerando que esse tempo médio seja em dias (inteiros), o teste paramétrico sobre uma média populacional, a hipótese nula utilizada seria:</p>
<ul>
<li><span class="math inline">\(H_{0}\)</span> : <span class="math inline">\(\mu\)</span> = 4;</li>
<li><span class="math inline">\(H_{1}\)</span> : <span class="math inline">\(\mu\)</span> <span class="math inline">\(\neq\)</span> 4;</li>
</ul>
</div>
<div id="tabset-4-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-5-tab">
<p>Calcule o coeficiente de correlação de pearson das variáveis “Número de aparições Zendaya em filmes por ano” e “Número de pessoas afogadas em piscinas no Brasil ao ano”. Em base nos seus resultados, considera que a variável “Número de aparições Zendaya em filmes por ano” é um bom preditor do número de pessoas afogadas no Brasil? Justifique a sua resposta.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>A correlação entre duas variáveis pode ser verificada utilizando o teste de Pearson, caso há a suposição de normalidade nos dados. No caso em que a suposição de normalidade não é considerada ou a caracterı́stica dos próprio dados pressupõe isto (escala no mı́nimo ordinal), então pode-se fazer uso de estatı́sticas alternativas como: Teste de correlação por postos de Spearman ou de Kendall.</p>
<p>Veja que de acordo com o gráfico abaixo que o “Número de aparições Zendaya em filmes por ano” e o “Número de pessoas afogadas em piscinas no Brasil ao ano” estão altamente correlacionados, mas faz senido essa correlçao?</p>
<p>Na estatística, o nome que damos a essa correlação é <strong>correlação espúria</strong>. Uma correlação espúria é uma relação aparente entre duas variáveis que não possuem uma conexão causal real entre si. Essa relação ilusória pode surgir devido a fatores externos ou coincidências estatísticas, levando a conclusões equivocadas se não forem adequadamente analisadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(tabela_5[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">lower =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">"smooth"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Relatório_GAZEUS_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A hipótese levantada é:</p>
<ul>
<li><span class="math inline">\(H_{0}\)</span> : <span class="math inline">\(\rho\)</span> = 0;</li>
<li><span class="math inline">\(H_{1}\)</span> : <span class="math inline">\(\rho\)</span> <span class="math inline">\(\neq\)</span> 0;</li>
</ul>
<p>Vamos considerar o nível de significância a 95%. O teste de correção de Pearson é dados por,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">cor.test</span>(tabela_5<span class="sc">$</span>zendaya, tabela_5<span class="sc">$</span>piscina,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  tabela_5$zendaya and tabela_5$piscina
t = 9.8414, df = 8, p-value = 9.563e-06
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.8394382 0.9910229
sample estimates:
      cor 
0.9610948 </code></pre>
</div>
</div>
<p>Ou seja, ao nível de 95% de significância, há correlação entre as variáveis analisadas, como explicado acima, essa correlação é denominada por correlação espúria.</p>
</div>
<div id="tabset-4-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-6-tab">
<p>Explique a diferença entre amostragem estratificada e amostragem randômica ou aleatória. Discuta quais são as vantagens e desvantagens de cada uma e dê exemplos de casos onde uma abordagem é mais adequada que a outra.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>A <strong>amostragem aleatória simples</strong> é um método de seleção de n unidades de N, de modo que cada uma das <span class="math inline">\(C_{n}\)</span> amostras distintas tenha uma chance igual de ser sorteada. Na prática, uma amostra aleatória simples é extraída unidade por unidade. As unidades da população são numeradas de 1 a N. Uma série de números aleatórios entre 1 e N é então sorteada, seja por meio de uma tabela de números aleatórios ou por meio de um programa de computador que produz tal tabela. Em qualquer sorteio o processo utilizado deve dar uma chance igual de seleção a qualquer número da população ainda não sorteado. As unidades que contêm esses n números constituem a amostra. É facilmente verificado que todas as amostras distintas de <span class="math inline">\(C_{n}\)</span> têm chances iguais de serem selecionadas por este método. Considere uma amostra distinta, ou seja, um conjunto de n unidades especificadas. No primeiro sorteio, a probabilidade de que alguma das n unidades especificadas seja selecionada é n/ N. No segundo sorteio, a probabilidade de que alguma das unidades especificadas restantes (n -1) seja sorteada é (n -1)/( N-1), e assim por diante.</p>
<p>Como um número sorteado é removido da população em todos os sorteios subsequentes, esse método também é chamado de amostragem aleatória sem reposição. A amostragem aleatória com reposição é inteiramente viável: em qualquer sorteio, todos os N membros da população têm a mesma chance de serem sorteados, independentemente da frequência com que já tenham sido sorteados. As fórmulas para as variâncias e variâncias estimadas das estimativas feitas a partir da amostra são muitas vezes mais simples quando a amostragem é com reposição do que quando é sem reposição. Por esta razão, a amostragem com reposição é por vezes utilizada nos planos amostrais mais complexos, embora à primeira vista pareça pouco sentido ter a mesma unidade duas ou mais vezes na amostra.</p>
<p>Na <strong>amostragem estratificada</strong>, a população de N unidades é primeiro dividida em subpopulações de unidades <span class="math inline">\(N_{1}, N_{2}, \cdots, N_{L}\)</span>, respectivamente. Essas subpopulações não se sobrepõem e juntas compreendem toda a população, de modo que <span class="math inline">\(N_{1} + N_{2} + \cdots + N_{L} = N\)</span>. As subpopulações são chamadas de estratos. Para obter todos os benefícios da estratificação, os valores do <span class="math inline">\(N_{h}\)</span> devem ser conhecidos. Determinados os estratos, de cada um é retirada uma amostra, sendo os sorteios feitos de forma independente nos diferentes estratos. Os tamanhos das amostras dentro dos estratos são indicados por <span class="math inline">\(n_{1}, n_{2}, \cdots, n_{L}\)</span> respectivamente. Se uma amostra aleatória simples for retirada em cada estrato, todo o procedimento é descrito como amostragem aleatória estratificada. A estratificação é uma técnica comum. Há muitas razões para isto, os principais são os seguintes.</p>
<ol type="1">
<li><p>Se forem necessários dados de precisão conhecida para certas subdivisões do população, é aconselhável tratar cada subdivisão como uma “população” por direito próprio.</p></li>
<li><p>Os problemas de amostragem podem diferir acentuadamente em diferentes partes da população. No caso das populações humanas, as pessoas que vivem em instituições (por exemplo, hotéis, hospitais, prisões) são frequentemente colocadas num estrato diferente das pessoas que vivem em casas normais porque uma abordagem diferente à amostragem é apropriada para as duas situações. Na amostragem de empresas, podemos possuir uma lista das grandes empresas, que são colocadas num estrato separado. Algum tipo de amostragem de área pode ter que ser usado para as empresas menores.</p></li>
<li><p>A estratificação pode produzir um ganho de precisão nas estimativas das características de toda a população. Pode ser possível dividir uma população heterogênea em subpopulações, cada uma das quais internamente homogênea. Isto é sugerido pelo nome estratos, com a implicação de uma divisão em camadas. Se cada estrato for homogêneo, no sentido de que as medidas variam pouco de uma unidade para outra, uma estimativa precisa da média de qualquer estrato pode ser obtida a partir de uma pequena amostra desse estrato. Estas estimativas podem então ser combinadas numa estimativa precisa para toda a população.</p></li>
</ol>
</div>
<div id="tabset-4-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-7-tab">
<p>Se você treina um modelo de Machine Learning (ou estadístico), como você identificaria se seu modelo tem uma alta variância (overfitting) ou um alto viés (bias, ou underfitting). Caso seu modelo apresenta alta variância, como você resolveria esse problema?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>Essa é uma questão de viés e variância em modelagem. Essa relação é fácil de ser observada na imagem abaixo.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/vies.jpeg" class="img-fluid figure-img" width="300"></p>
<figcaption>Andrew Ng</figcaption>
</figure>
</div>
<p>A abordagem Bayesiana evita o overfitting, por mais que esse não seja necessariamente seu objetivo primordial, mas estamos condicionados a utilizar das formas ditas <strong>regularizadoras</strong>. Elas também chamadas de <strong>penalizadoras</strong> e são conhecidas por regressões LASSO e Ridge. É claro que a análise dos valores de VP, FN, VN e FP usando-se uma amostra de teste ou validação é crucial para evitar o overfitting, mas ainda assim, é importante estar atento a amostragem dos dados para compor a amostra de teste ou de validação.</p>
<p>Acredito que deve haver vários outros métodos mais atualizados que esses mencionados acima, mas os básico as vezes já resolve o problema e também identifica a causa raiz, facilitando assim a procura de outros métodos ao invés de só ir aplicando vários métodos e escolher o que mais proporciona ganhos.</p>
</div>
<div id="tabset-4-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-8-tab">
<p>Considere o seguinte modelo de regressão:</p>
<ul>
<li>Salário = 1200 + 500.Idade + 600.Têm Faculdade + 50.Têm Linkedin</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">A</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">B</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">C</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Interprete o efeito da Idade na variável salário.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>Neste modelo, temos que a variável idade foi significativa (p-value = 0.023) com sinal positivo, ou seja, quanto maior a idade (aqui é importante ressaltar que se ela estiver categorizada, a interpretação é alterada), maior será a chance do Salário estar acima da média. Para este resultado é pertinente dizer que as empresas associam a idade a um bom salário, ou, assumem que quando o individuo é mais velho, este consequentemente deve ganhar mais em relação aos mais novos.</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>Que acontece com as pessoas que não tem faculdade?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>A variável “Têm faculdade” foi significativa (p-value = 0.032) com sinal positivo, o que implica que esta variável auxilia no aumento do salário, em que quanto maior o seu nível de instrução, maior será a chance (600 vezes) do salário estar acima da média daqueles que não têm faculdade e isso pode ser recorrente ao fato desse indivíduo ter mais conhecimento sobre a área. Logo, de acordo com o modelo, aqueles que não têm faculdade estão propícios a receberem um salário abaixo da média em relação a aqueles que possuem faculdade.</p>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>Considere agora que o desvio padrão do coeficiente da variável “Têm Linkedin” é de 47, por tanto o seu p-valor é 0.92 (como visto na equação abaixo). O que isso implica para o modelo em questão? Essa variável é relevante?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resposta
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>Essa variável não é relevante para predizer salários, mas veja que, apesar de não ser significativa, ela é positiva. Podemos iniciar com a problemática de que ter uma conta no linkedin não implica que seu salário será impactado por isso, mas podemos supor que o linkedin te ajuda positivamente em alguns aspectos, menos no salário. Aqui temos uma chance de analisar um pouco mais essa variável.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Código fonte</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb18" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Teste Técnico" # Título do relatório</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "**Posição de Data Analyst Jr - Buraco Jogatina**"</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Fernanda Kelly R. Silva" # Autor(a)</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="an">lang:</span><span class="co"> pt </span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r format(Sys.Date())`" </span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="an">date-format:</span><span class="co"> short </span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true </span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">    html: </span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">      #css: ["custom.css"] </span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">      code-fold: false </span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">      code-tools: true  </span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">      theme: </span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">        light: cosmo</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co">        dark: superhero </span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co">#title-block-banner: "#874a9c" </span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="an">code-annotations:</span><span class="co"> hover </span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a><span class="fu"># Tarefa 01: SQL</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>Um sistema de pagamentos, registra as transações dos seus usuários em duas tabelas:</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>Users: Contém o registro de usuários do sistema. Os seus atributos são:</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>id: Identificador único de usuário</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>age (idade): em anos</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>país de residência: país onde o usuários indicou que reside</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>Transactions: Que contém o registro de todas as transações que os usuários realizam através do sistema.</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>transaction_id: Identificador único da transação</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>transaction_date: Data na qual a transação foi realizada. O tipo é timestamp, ou seja, é um tipo de data que contém o ano, mês, dia, hora, minuto e segundos.</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>user_id: Identificador do usuário que realizou a transação (é uma chave externa à tabela users)</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>transaction_state: Campo que indica o estado da transação que pode ser *INITIATED*, *SUCCESS*, *FRAUD* or *CANCELLED*.</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>transaction_amount: Valor da transação em USD</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>Com estes dados disponíveis, precisamos gerar queries SQL para responder às seguintes perguntas. **Para fins didáticos, criei esses bancos de dados para simular a resolução das questões.**</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a><span class="fu">### tabela_transactions</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>tabela_transactions <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">~</span>user_id, <span class="sc">~</span>transaction_date, <span class="sc">~</span>transaction_id, <span class="sc">~</span>transaction_state, <span class="sc">~</span>transaction_amount,</span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"1"</span>, <span class="st">"2024-03-12 15:08:49 UTC"</span>, <span class="st">"255"</span>, <span class="st">"sucesso"</span>, <span class="st">"119.65"</span>,</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2"</span>, <span class="st">"2024-03-23 20:08:03 UTC"</span>, <span class="st">"585"</span>, <span class="st">"INITIATED"</span>, <span class="st">"22.63"</span>,</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"3"</span>, <span class="st">"2024-03-18 10:56:25 UTC"</span>, <span class="st">"178"</span>, <span class="st">"CANCELLED"</span>, <span class="st">"225.87"</span>,</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"4"</span>, <span class="st">"2024-03-12 08:21:32 UTC"</span>, <span class="st">"887"</span>, <span class="st">"SUCCESS"</span>, <span class="st">"16.58"</span>,</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"5"</span>, <span class="st">"2024-03-30 05:24:49 UTC"</span>, <span class="st">"569"</span>, <span class="st">"FRAUD"</span>, <span class="st">"1225.89"</span>,</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"6"</span>, <span class="st">"2024-03-21 12:32:51 UTC"</span>, <span class="st">"789"</span>, <span class="st">"SUCCESS"</span>, <span class="st">"59.90"</span>,</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"7"</span>, <span class="st">"2024-03-10 08:25:49 UTC"</span>, <span class="st">"236"</span>, <span class="st">"FRAUD"</span>, <span class="st">"256.98"</span>,</span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"7"</span>, <span class="st">"2024-03-10 05:21:49 UTC"</span>, <span class="st">"458"</span>, <span class="st">"FRAUD"</span>, <span class="st">"986.69"</span>,</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"7"</span>, <span class="st">"2024-03-09 01:08:49 UTC"</span>, <span class="st">"125"</span>, <span class="st">"FRAUD"</span>, <span class="st">"1256.89"</span>,</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>                         ) <span class="sc">%&gt;%</span> </span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>                      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">transaction_amount =</span> <span class="fu">as.numeric</span>(transaction_amount),</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">data_curta =</span> <span class="fu">as.Date</span>(transaction_date)) </span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(tabela_transactions)</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a><span class="fu">### tabela_user</span></span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>tabela_user <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">~</span>id, <span class="sc">~</span>age, <span class="sc">~</span>pais, </span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"1"</span>, <span class="st">"18"</span>, <span class="st">"Brasil"</span>,</span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2"</span>, <span class="st">"29"</span>, <span class="st">"Estados Unidos"</span>,</span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"3"</span>, <span class="st">"55"</span>, <span class="st">"África do Sul"</span>,</span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"4"</span>, <span class="st">"32"</span>, <span class="st">"Bolívia"</span>,</span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"5"</span>, <span class="st">"60"</span>, <span class="st">"Brasil"</span>,</span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"6"</span>, <span class="st">"42"</span>, <span class="st">"Brasil"</span>,</span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"7"</span>, <span class="st">"38"</span>, <span class="st">"África do Sul"</span>,</span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a>                         ) </span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(tabela_user)</span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a>Para que a experiência do SQL seja real, vou conectar as bases com o SQLite.</span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-109"><a href="#cb18-109" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dbplyr)</span>
<span id="cb18-110"><a href="#cb18-110" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-111"><a href="#cb18-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-112"><a href="#cb18-112" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">":memory:"</span>)</span>
<span id="cb18-113"><a href="#cb18-113" aria-hidden="true" tabindex="-1"></a><span class="fu">copy_to</span>(con, tabela_user)</span>
<span id="cb18-114"><a href="#cb18-114" aria-hidden="true" tabindex="-1"></a><span class="fu">copy_to</span>(con, tabela_transactions)</span>
<span id="cb18-115"><a href="#cb18-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-116"><a href="#cb18-116" aria-hidden="true" tabindex="-1"></a>tabela_user <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">"tabela_user"</span>)                 <span class="co"># &lt;1&gt;</span></span>
<span id="cb18-117"><a href="#cb18-117" aria-hidden="true" tabindex="-1"></a>tabela_transactions <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">"tabela_transactions"</span>) <span class="co"># &lt;2&gt;</span></span>
<span id="cb18-118"><a href="#cb18-118" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-119"><a href="#cb18-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-120"><a href="#cb18-120" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Conectando a base de dados {tabela_user} com o SQLite</span>
<span id="cb18-121"><a href="#cb18-121" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Conectando a base de dados {tabela_transactions} com o SQLite</span>
<span id="cb18-122"><a href="#cb18-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-123"><a href="#cb18-123" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb18-124"><a href="#cb18-124" aria-hidden="true" tabindex="-1"></a><span class="fu"># A</span></span>
<span id="cb18-125"><a href="#cb18-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-126"><a href="#cb18-126" aria-hidden="true" tabindex="-1"></a>Qual é a idade média de usuários do sistema por país?</span>
<span id="cb18-127"><a href="#cb18-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-130"><a href="#cb18-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-131"><a href="#cb18-131" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-132"><a href="#cb18-132" aria-hidden="true" tabindex="-1"></a>tabela_A <span class="ot">&lt;-</span> tabela_user <span class="sc">%&gt;%</span></span>
<span id="cb18-133"><a href="#cb18-133" aria-hidden="true" tabindex="-1"></a>                     dplyr<span class="sc">::</span><span class="fu">group_by</span>(pais) <span class="sc">%&gt;%</span> </span>
<span id="cb18-134"><a href="#cb18-134" aria-hidden="true" tabindex="-1"></a>                     dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">media_idade =</span> <span class="fu">round</span>(<span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),<span class="dv">2</span>))</span>
<span id="cb18-135"><a href="#cb18-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-136"><a href="#cb18-136" aria-hidden="true" tabindex="-1"></a><span class="co"># tabela_A %&gt;%</span></span>
<span id="cb18-137"><a href="#cb18-137" aria-hidden="true" tabindex="-1"></a><span class="co">#   show_query()</span></span>
<span id="cb18-138"><a href="#cb18-138" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-139"><a href="#cb18-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-140"><a href="#cb18-140" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-141"><a href="#cb18-141" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-142"><a href="#cb18-142" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-143"><a href="#cb18-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-144"><a href="#cb18-144" aria-hidden="true" tabindex="-1"></a><span class="in">``` sql</span></span>
<span id="cb18-145"><a href="#cb18-145" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb18-146"><a href="#cb18-146" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="st">`pais`</span>, <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="st">`age`</span>), <span class="dv">2</span>) <span class="kw">AS</span> <span class="st">`media_idade`</span></span>
<span id="cb18-147"><a href="#cb18-147" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> <span class="st">`tabela_user`</span></span>
<span id="cb18-148"><a href="#cb18-148" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="st">`pais`</span></span>
<span id="cb18-149"><a href="#cb18-149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-150"><a href="#cb18-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-151"><a href="#cb18-151" aria-hidden="true" tabindex="-1"></a><span class="fu"># B</span></span>
<span id="cb18-152"><a href="#cb18-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-153"><a href="#cb18-153" aria-hidden="true" tabindex="-1"></a>Qual é o país com a maior quantidade de dinheiro transacionado (considere só transações finalizadas com sucesso ou "SUCCESS")?</span>
<span id="cb18-154"><a href="#cb18-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-155"><a href="#cb18-155" aria-hidden="true" tabindex="-1"></a>Como vamos precisar do merge das duas tabelas, vou criar a **tabela_merge** sem algum filtro para facilitar as consultas e não alocar memória desnecessária.</span>
<span id="cb18-156"><a href="#cb18-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-159"><a href="#cb18-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-160"><a href="#cb18-160" aria-hidden="true" tabindex="-1"></a>tabela_merge <span class="ot">&lt;-</span> tabela_transactions <span class="sc">%&gt;%</span></span>
<span id="cb18-161"><a href="#cb18-161" aria-hidden="true" tabindex="-1"></a>                 dplyr<span class="sc">::</span><span class="fu">left_join</span>(tabela_user, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"user_id"</span> <span class="ot">=</span> <span class="st">"id"</span>)) </span>
<span id="cb18-162"><a href="#cb18-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-163"><a href="#cb18-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-166"><a href="#cb18-166" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-167"><a href="#cb18-167" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-168"><a href="#cb18-168" aria-hidden="true" tabindex="-1"></a>tabela_B <span class="ot">&lt;-</span> tabela_merge <span class="sc">%&gt;%</span> </span>
<span id="cb18-169"><a href="#cb18-169" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">filter</span>(transaction_state <span class="sc">==</span> <span class="st">"SUCCESS"</span> <span class="sc">|</span> transaction_state <span class="sc">==</span> <span class="st">"sucesso"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-170"><a href="#cb18-170" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">slice_max</span>(transaction_amount)</span>
<span id="cb18-171"><a href="#cb18-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-172"><a href="#cb18-172" aria-hidden="true" tabindex="-1"></a><span class="co"># tabela_B %&gt;%</span></span>
<span id="cb18-173"><a href="#cb18-173" aria-hidden="true" tabindex="-1"></a><span class="co">#   show_query()</span></span>
<span id="cb18-174"><a href="#cb18-174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-175"><a href="#cb18-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-176"><a href="#cb18-176" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-177"><a href="#cb18-177" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-178"><a href="#cb18-178" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-179"><a href="#cb18-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-180"><a href="#cb18-180" aria-hidden="true" tabindex="-1"></a><span class="in">``` sql</span></span>
<span id="cb18-181"><a href="#cb18-181" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb18-182"><a href="#cb18-182" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-183"><a href="#cb18-183" aria-hidden="true" tabindex="-1"></a>  <span class="st">`user_id`</span>,</span>
<span id="cb18-184"><a href="#cb18-184" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_date`</span>,</span>
<span id="cb18-185"><a href="#cb18-185" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_id`</span>,</span>
<span id="cb18-186"><a href="#cb18-186" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_state`</span>,</span>
<span id="cb18-187"><a href="#cb18-187" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_amount`</span>,</span>
<span id="cb18-188"><a href="#cb18-188" aria-hidden="true" tabindex="-1"></a>  <span class="st">`data_curta`</span>,</span>
<span id="cb18-189"><a href="#cb18-189" aria-hidden="true" tabindex="-1"></a>  <span class="st">`age`</span>,</span>
<span id="cb18-190"><a href="#cb18-190" aria-hidden="true" tabindex="-1"></a>  <span class="st">`pais`</span></span>
<span id="cb18-191"><a href="#cb18-191" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb18-192"><a href="#cb18-192" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>, RANK() OVER (<span class="kw">ORDER</span> <span class="kw">BY</span> <span class="st">`transaction_amount`</span> <span class="kw">DESC</span>) <span class="kw">AS</span> <span class="st">`col01`</span></span>
<span id="cb18-193"><a href="#cb18-193" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb18-194"><a href="#cb18-194" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="op">*</span>, <span class="st">`age`</span>, <span class="st">`pais`</span></span>
<span id="cb18-195"><a href="#cb18-195" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> <span class="st">`tabela_transactions`</span></span>
<span id="cb18-196"><a href="#cb18-196" aria-hidden="true" tabindex="-1"></a>    <span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="st">`tabela_user`</span></span>
<span id="cb18-197"><a href="#cb18-197" aria-hidden="true" tabindex="-1"></a>      <span class="kw">ON</span> (<span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="st">`user_id`</span> <span class="op">=</span> <span class="st">`tabela_user`</span><span class="ch">.</span><span class="st">`id`</span>)</span>
<span id="cb18-198"><a href="#cb18-198" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-199"><a href="#cb18-199" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> (<span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'SUCCESS'</span> <span class="kw">OR</span> <span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'sucesso'</span>)</span>
<span id="cb18-200"><a href="#cb18-200" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-201"><a href="#cb18-201" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (<span class="st">`col01`</span> <span class="op">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb18-202"><a href="#cb18-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-203"><a href="#cb18-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-204"><a href="#cb18-204" aria-hidden="true" tabindex="-1"></a><span class="fu"># C</span></span>
<span id="cb18-205"><a href="#cb18-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-206"><a href="#cb18-206" aria-hidden="true" tabindex="-1"></a>Qual é o país com maior taxa de fraude em porcentagem respeito ao número de transações totais no país?</span>
<span id="cb18-207"><a href="#cb18-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-210"><a href="#cb18-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-211"><a href="#cb18-211" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-212"><a href="#cb18-212" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb18-213"><a href="#cb18-213" aria-hidden="true" tabindex="-1"></a>tabela_C <span class="ot">&lt;-</span> tabela_merge <span class="sc">%&gt;%</span> </span>
<span id="cb18-214"><a href="#cb18-214" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">group_by</span>(transaction_state) <span class="sc">%&gt;%</span> </span>
<span id="cb18-215"><a href="#cb18-215" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">taxa =</span> transaction_amount<span class="sc">/</span><span class="fu">sum</span>(transaction_amount)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-216"><a href="#cb18-216" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-217"><a href="#cb18-217" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">filter</span>(transaction_state <span class="sc">==</span> <span class="st">"FRAUD"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-218"><a href="#cb18-218" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">slice_max</span>(taxa)</span>
<span id="cb18-219"><a href="#cb18-219" aria-hidden="true" tabindex="-1"></a><span class="co"># tabela_C %&gt;%</span></span>
<span id="cb18-220"><a href="#cb18-220" aria-hidden="true" tabindex="-1"></a><span class="co">#   show_query()</span></span>
<span id="cb18-221"><a href="#cb18-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-222"><a href="#cb18-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-223"><a href="#cb18-223" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-224"><a href="#cb18-224" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-225"><a href="#cb18-225" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-226"><a href="#cb18-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-227"><a href="#cb18-227" aria-hidden="true" tabindex="-1"></a><span class="in">``` sql</span></span>
<span id="cb18-228"><a href="#cb18-228" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb18-229"><a href="#cb18-229" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-230"><a href="#cb18-230" aria-hidden="true" tabindex="-1"></a>  <span class="st">`user_id`</span>,</span>
<span id="cb18-231"><a href="#cb18-231" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_date`</span>,</span>
<span id="cb18-232"><a href="#cb18-232" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_id`</span>,</span>
<span id="cb18-233"><a href="#cb18-233" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_state`</span>,</span>
<span id="cb18-234"><a href="#cb18-234" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_amount`</span>,</span>
<span id="cb18-235"><a href="#cb18-235" aria-hidden="true" tabindex="-1"></a>  <span class="st">`data_curta`</span>,</span>
<span id="cb18-236"><a href="#cb18-236" aria-hidden="true" tabindex="-1"></a>  <span class="st">`age`</span>,</span>
<span id="cb18-237"><a href="#cb18-237" aria-hidden="true" tabindex="-1"></a>  <span class="st">`pais`</span>,</span>
<span id="cb18-238"><a href="#cb18-238" aria-hidden="true" tabindex="-1"></a>  <span class="st">`taxa`</span></span>
<span id="cb18-239"><a href="#cb18-239" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb18-240"><a href="#cb18-240" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>, RANK() OVER (<span class="kw">ORDER</span> <span class="kw">BY</span> <span class="st">`taxa`</span> <span class="kw">DESC</span>) <span class="kw">AS</span> <span class="st">`col01`</span></span>
<span id="cb18-241"><a href="#cb18-241" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb18-242"><a href="#cb18-242" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb18-243"><a href="#cb18-243" aria-hidden="true" tabindex="-1"></a>      <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>,</span>
<span id="cb18-244"><a href="#cb18-244" aria-hidden="true" tabindex="-1"></a>      <span class="st">`transaction_amount`</span> <span class="op">/</span> <span class="fu">SUM</span>(<span class="st">`transaction_amount`</span>) OVER (PARTITION <span class="kw">BY</span> <span class="st">`transaction_state`</span>) <span class="kw">AS</span> <span class="st">`taxa`</span></span>
<span id="cb18-245"><a href="#cb18-245" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb18-246"><a href="#cb18-246" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SELECT</span> <span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="op">*</span>, <span class="st">`age`</span>, <span class="st">`pais`</span></span>
<span id="cb18-247"><a href="#cb18-247" aria-hidden="true" tabindex="-1"></a>      <span class="kw">FROM</span> <span class="st">`tabela_transactions`</span></span>
<span id="cb18-248"><a href="#cb18-248" aria-hidden="true" tabindex="-1"></a>      <span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="st">`tabela_user`</span></span>
<span id="cb18-249"><a href="#cb18-249" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ON</span> (<span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="st">`user_id`</span> <span class="op">=</span> <span class="st">`tabela_user`</span><span class="ch">.</span><span class="st">`id`</span>)</span>
<span id="cb18-250"><a href="#cb18-250" aria-hidden="true" tabindex="-1"></a>    ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-251"><a href="#cb18-251" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-252"><a href="#cb18-252" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> (<span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'FRAUD'</span>)</span>
<span id="cb18-253"><a href="#cb18-253" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-254"><a href="#cb18-254" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (<span class="st">`col01`</span> <span class="op">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb18-255"><a href="#cb18-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-256"><a href="#cb18-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-257"><a href="#cb18-257" aria-hidden="true" tabindex="-1"></a><span class="fu"># D</span></span>
<span id="cb18-258"><a href="#cb18-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-259"><a href="#cb18-259" aria-hidden="true" tabindex="-1"></a>Na mesma linha da pergunta anterior, responda qual é a faixa de idade de usuários que mais cometem fraude (em percentagem). Separe as faixas etárias em: (&lt; 18 anos, 18-30 anos, 30 - 45 anos, 45 - 60 anos, 60 &gt; anos) e considere que para responder essa pergunta, você deverá considerar o fato que um usuário pode ter executado várias transações, das quais poucas (ou muitas) podem ter sido fraude entre as demais.</span>
<span id="cb18-260"><a href="#cb18-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-263"><a href="#cb18-263" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-264"><a href="#cb18-264" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-265"><a href="#cb18-265" aria-hidden="true" tabindex="-1"></a>tabela_D <span class="ot">&lt;-</span> tabela_merge <span class="sc">%&gt;%</span> </span>
<span id="cb18-266"><a href="#cb18-266" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">age_cat =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"menor que 18 anos"</span>,</span>
<span id="cb18-267"><a href="#cb18-267" aria-hidden="true" tabindex="-1"></a>                                                      age <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"18-29 anos"</span>,</span>
<span id="cb18-268"><a href="#cb18-268" aria-hidden="true" tabindex="-1"></a>                                                      age <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">45</span> <span class="sc">~</span> <span class="st">"30-44 anos"</span>,</span>
<span id="cb18-269"><a href="#cb18-269" aria-hidden="true" tabindex="-1"></a>                                                      age <span class="sc">&gt;=</span> <span class="dv">45</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">"45-59 anos"</span>,</span>
<span id="cb18-270"><a href="#cb18-270" aria-hidden="true" tabindex="-1"></a>                                                      age <span class="sc">&gt;=</span> <span class="dv">60</span>  <span class="sc">~</span> <span class="st">"maior igual a 60 anos"</span>),</span>
<span id="cb18-271"><a href="#cb18-271" aria-hidden="true" tabindex="-1"></a>                           <span class="at">taxa_idade =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(transaction_state <span class="sc">==</span> <span class="st">"FRAUD"</span>, transaction_amount<span class="sc">/</span><span class="fu">sum</span>(transaction_amount), <span class="dv">0</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb18-272"><a href="#cb18-272" aria-hidden="true" tabindex="-1"></a>             dplyr<span class="sc">::</span><span class="fu">slice_max</span>(taxa_idade)</span>
<span id="cb18-273"><a href="#cb18-273" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-274"><a href="#cb18-274" aria-hidden="true" tabindex="-1"></a><span class="co"># tabela_D %&gt;%</span></span>
<span id="cb18-275"><a href="#cb18-275" aria-hidden="true" tabindex="-1"></a><span class="co">#   show_query()</span></span>
<span id="cb18-276"><a href="#cb18-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-277"><a href="#cb18-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-278"><a href="#cb18-278" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-279"><a href="#cb18-279" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-280"><a href="#cb18-280" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-281"><a href="#cb18-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-282"><a href="#cb18-282" aria-hidden="true" tabindex="-1"></a><span class="in">``` sql</span></span>
<span id="cb18-283"><a href="#cb18-283" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-284"><a href="#cb18-284" aria-hidden="true" tabindex="-1"></a>  <span class="st">`user_id`</span>,</span>
<span id="cb18-285"><a href="#cb18-285" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_date`</span>,</span>
<span id="cb18-286"><a href="#cb18-286" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_id`</span>,</span>
<span id="cb18-287"><a href="#cb18-287" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_state`</span>,</span>
<span id="cb18-288"><a href="#cb18-288" aria-hidden="true" tabindex="-1"></a>  <span class="st">`transaction_amount`</span>,</span>
<span id="cb18-289"><a href="#cb18-289" aria-hidden="true" tabindex="-1"></a>  <span class="st">`data_curta`</span>,</span>
<span id="cb18-290"><a href="#cb18-290" aria-hidden="true" tabindex="-1"></a>  <span class="st">`age`</span>,</span>
<span id="cb18-291"><a href="#cb18-291" aria-hidden="true" tabindex="-1"></a>  <span class="st">`pais`</span>,</span>
<span id="cb18-292"><a href="#cb18-292" aria-hidden="true" tabindex="-1"></a>  <span class="st">`age_cat`</span>,</span>
<span id="cb18-293"><a href="#cb18-293" aria-hidden="true" tabindex="-1"></a>  <span class="st">`taxa_idade`</span></span>
<span id="cb18-294"><a href="#cb18-294" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb18-295"><a href="#cb18-295" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>, RANK() OVER (<span class="kw">ORDER</span> <span class="kw">BY</span> <span class="st">`taxa_idade`</span> <span class="kw">DESC</span>) <span class="kw">AS</span> <span class="st">`col01`</span></span>
<span id="cb18-296"><a href="#cb18-296" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb18-297"><a href="#cb18-297" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb18-298"><a href="#cb18-298" aria-hidden="true" tabindex="-1"></a>      <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>,</span>
<span id="cb18-299"><a href="#cb18-299" aria-hidden="true" tabindex="-1"></a>      <span class="cf">CASE</span></span>
<span id="cb18-300"><a href="#cb18-300" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (<span class="st">`age`</span> <span class="op">&lt;</span> <span class="fl">18.0</span>) <span class="cf">THEN</span> <span class="st">'menor que 18 anos'</span></span>
<span id="cb18-301"><a href="#cb18-301" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (<span class="st">`age`</span> <span class="op">&gt;=</span> <span class="fl">18.0</span> <span class="kw">AND</span> <span class="st">`age`</span> <span class="op">&lt;</span> <span class="fl">30.0</span>) <span class="cf">THEN</span> <span class="st">'18-29 anos'</span></span>
<span id="cb18-302"><a href="#cb18-302" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (<span class="st">`age`</span> <span class="op">&gt;=</span> <span class="fl">30.0</span> <span class="kw">AND</span> <span class="st">`age`</span> <span class="op">&lt;</span> <span class="fl">45.0</span>) <span class="cf">THEN</span> <span class="st">'30-44 anos'</span></span>
<span id="cb18-303"><a href="#cb18-303" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (<span class="st">`age`</span> <span class="op">&gt;=</span> <span class="fl">45.0</span> <span class="kw">AND</span> <span class="st">`age`</span> <span class="op">&lt;</span> <span class="fl">60.0</span>) <span class="cf">THEN</span> <span class="st">'45-59 anos'</span></span>
<span id="cb18-304"><a href="#cb18-304" aria-hidden="true" tabindex="-1"></a><span class="cf">WHEN</span> (<span class="st">`age`</span> <span class="op">&gt;=</span> <span class="fl">60.0</span>) <span class="cf">THEN</span> <span class="st">'maior igual a 60 anos'</span></span>
<span id="cb18-305"><a href="#cb18-305" aria-hidden="true" tabindex="-1"></a><span class="cf">END</span> <span class="kw">AS</span> <span class="st">`age_cat`</span>,</span>
<span id="cb18-306"><a href="#cb18-306" aria-hidden="true" tabindex="-1"></a>      <span class="cf">CASE</span> <span class="cf">WHEN</span> (<span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'FRAUD'</span>) <span class="cf">THEN</span> (<span class="st">`transaction_amount`</span> <span class="op">/</span> <span class="fu">SUM</span>(<span class="st">`transaction_amount`</span>) OVER ()) <span class="cf">WHEN</span> <span class="kw">NOT</span> (<span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'FRAUD'</span>) <span class="cf">THEN</span> <span class="fl">0.0</span> <span class="cf">END</span> <span class="kw">AS</span> <span class="st">`taxa_idade`</span></span>
<span id="cb18-307"><a href="#cb18-307" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb18-308"><a href="#cb18-308" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SELECT</span> <span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="op">*</span>, <span class="st">`age`</span>, <span class="st">`pais`</span></span>
<span id="cb18-309"><a href="#cb18-309" aria-hidden="true" tabindex="-1"></a>      <span class="kw">FROM</span> <span class="st">`tabela_transactions`</span></span>
<span id="cb18-310"><a href="#cb18-310" aria-hidden="true" tabindex="-1"></a>      <span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="st">`tabela_user`</span></span>
<span id="cb18-311"><a href="#cb18-311" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ON</span> (<span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="st">`user_id`</span> <span class="op">=</span> <span class="st">`tabela_user`</span><span class="ch">.</span><span class="st">`id`</span>)</span>
<span id="cb18-312"><a href="#cb18-312" aria-hidden="true" tabindex="-1"></a>    ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-313"><a href="#cb18-313" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-314"><a href="#cb18-314" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-315"><a href="#cb18-315" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (<span class="st">`col01`</span> <span class="op">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb18-316"><a href="#cb18-316" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-317"><a href="#cb18-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-318"><a href="#cb18-318" aria-hidden="true" tabindex="-1"></a><span class="fu"># E</span></span>
<span id="cb18-319"><a href="#cb18-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-320"><a href="#cb18-320" aria-hidden="true" tabindex="-1"></a>Imagine que a camada executiva da empresa dona do sistema, precisa criar um Dashboard para monitorar o estado das transações nos últimos 3 dias. Para isso você precisa criar uma query SQL que calcule o número e dinheiro das transações não finalizadas, número e dinheiro de transações finalizadas com sucesso (SUCCESS), o número e dinheiro de transações canceladas (CANCELLED), o número e dinheiro de fraudes (FRAUD), agrupado por país, nos 3 dias anteriores de quando o executivo da empresa consulte seu Dashboard.</span>
<span id="cb18-321"><a href="#cb18-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-324"><a href="#cb18-324" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-325"><a href="#cb18-325" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-326"><a href="#cb18-326" aria-hidden="true" tabindex="-1"></a>tabela_E <span class="ot">&lt;-</span> tabela_merge <span class="sc">%&gt;%</span> </span>
<span id="cb18-327"><a href="#cb18-327" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">tres_n =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>((lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">==</span> data_curta, <span class="dv">1</span>,</span>
<span id="cb18-328"><a href="#cb18-328" aria-hidden="true" tabindex="-1"></a>                                                    dplyr<span class="sc">::</span><span class="fu">if_else</span>((lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> <span class="dv">2</span>) <span class="sc">==</span> data_curta, <span class="dv">1</span>,</span>
<span id="cb18-329"><a href="#cb18-329" aria-hidden="true" tabindex="-1"></a>                                                                   dplyr<span class="sc">::</span><span class="fu">if_else</span>((lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> <span class="dv">2</span>) <span class="sc">==</span> data_curta,<span class="dv">1</span>,<span class="dv">0</span>)))) <span class="sc">%&gt;%</span> </span>
<span id="cb18-330"><a href="#cb18-330" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">filter</span>(tres_n <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-331"><a href="#cb18-331" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">transaction_state =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(transaction_state <span class="sc">==</span> <span class="st">"sucesso"</span>, <span class="st">"SUCCESS"</span>, transaction_state)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-332"><a href="#cb18-332" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">group_by</span>(pais, transaction_state) <span class="sc">%&gt;%</span> </span>
<span id="cb18-333"><a href="#cb18-333" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n_transacoes =</span>  <span class="fu">n</span>(),</span>
<span id="cb18-334"><a href="#cb18-334" aria-hidden="true" tabindex="-1"></a>                            <span class="at">dinheiro =</span> <span class="fu">sum</span>(transaction_amount))</span>
<span id="cb18-335"><a href="#cb18-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-336"><a href="#cb18-336" aria-hidden="true" tabindex="-1"></a><span class="co"># tabela_E %&gt;%</span></span>
<span id="cb18-337"><a href="#cb18-337" aria-hidden="true" tabindex="-1"></a><span class="co">#   show_query()</span></span>
<span id="cb18-338"><a href="#cb18-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-339"><a href="#cb18-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-340"><a href="#cb18-340" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-341"><a href="#cb18-341" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-342"><a href="#cb18-342" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-343"><a href="#cb18-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-344"><a href="#cb18-344" aria-hidden="true" tabindex="-1"></a><span class="in">``` sql</span></span>
<span id="cb18-345"><a href="#cb18-345" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SQL<span class="op">&gt;</span></span>
<span id="cb18-346"><a href="#cb18-346" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-347"><a href="#cb18-347" aria-hidden="true" tabindex="-1"></a>  <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>,</span>
<span id="cb18-348"><a href="#cb18-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) OVER <span class="st">`win1`</span> <span class="kw">AS</span> <span class="st">`n_transacoes`</span>,</span>
<span id="cb18-349"><a href="#cb18-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">SUM</span>(<span class="st">`transaction_amount`</span>) OVER <span class="st">`win1`</span> <span class="kw">AS</span> <span class="st">`dinheiro`</span></span>
<span id="cb18-350"><a href="#cb18-350" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb18-351"><a href="#cb18-351" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span></span>
<span id="cb18-352"><a href="#cb18-352" aria-hidden="true" tabindex="-1"></a>    <span class="st">`user_id`</span>,</span>
<span id="cb18-353"><a href="#cb18-353" aria-hidden="true" tabindex="-1"></a>    <span class="st">`transaction_date`</span>,</span>
<span id="cb18-354"><a href="#cb18-354" aria-hidden="true" tabindex="-1"></a>    <span class="st">`transaction_id`</span>,</span>
<span id="cb18-355"><a href="#cb18-355" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span> <span class="cf">WHEN</span> (<span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'sucesso'</span>) <span class="cf">THEN</span> <span class="st">'SUCCESS'</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> (<span class="st">`transaction_state`</span> <span class="op">=</span> <span class="st">'sucesso'</span>) <span class="cf">THEN</span> <span class="st">`transaction_state`</span> <span class="cf">END</span> <span class="kw">AS</span> <span class="st">`transaction_state`</span>,</span>
<span id="cb18-356"><a href="#cb18-356" aria-hidden="true" tabindex="-1"></a>    <span class="st">`transaction_amount`</span>,</span>
<span id="cb18-357"><a href="#cb18-357" aria-hidden="true" tabindex="-1"></a>    <span class="st">`data_curta`</span>,</span>
<span id="cb18-358"><a href="#cb18-358" aria-hidden="true" tabindex="-1"></a>    <span class="st">`age`</span>,</span>
<span id="cb18-359"><a href="#cb18-359" aria-hidden="true" tabindex="-1"></a>    <span class="st">`pais`</span>,</span>
<span id="cb18-360"><a href="#cb18-360" aria-hidden="true" tabindex="-1"></a>    <span class="st">`tres_n`</span></span>
<span id="cb18-361"><a href="#cb18-361" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> (</span>
<span id="cb18-362"><a href="#cb18-362" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb18-363"><a href="#cb18-363" aria-hidden="true" tabindex="-1"></a>      <span class="st">`q01`</span><span class="ch">.</span><span class="op">*</span>,</span>
<span id="cb18-364"><a href="#cb18-364" aria-hidden="true" tabindex="-1"></a>      <span class="cf">CASE</span> <span class="cf">WHEN</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">1.0</span>) <span class="op">=</span> <span class="st">`data_curta`</span>) <span class="cf">THEN</span> <span class="fl">1.0</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">1.0</span>) <span class="op">=</span> <span class="st">`data_curta`</span>) <span class="cf">THEN</span> (<span class="cf">CASE</span> <span class="cf">WHEN</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> <span class="st">`data_curta`</span>) <span class="cf">THEN</span> <span class="fl">1.0</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> <span class="st">`data_curta`</span>) <span class="cf">THEN</span> (<span class="cf">CASE</span> <span class="cf">WHEN</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> <span class="st">`data_curta`</span>) <span class="cf">THEN</span> <span class="fl">1.0</span> <span class="cf">WHEN</span> <span class="kw">NOT</span> ((<span class="dt">DATE</span>(<span class="st">'now'</span>) <span class="op">-</span> <span class="fl">2.0</span>) <span class="op">=</span> <span class="st">`data_curta`</span>) <span class="cf">THEN</span> <span class="fl">0.0</span> <span class="cf">END</span>) <span class="cf">END</span>) <span class="cf">END</span> <span class="kw">AS</span> <span class="st">`tres_n`</span></span>
<span id="cb18-365"><a href="#cb18-365" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> (</span>
<span id="cb18-366"><a href="#cb18-366" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SELECT</span> <span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="op">*</span>, <span class="st">`age`</span>, <span class="st">`pais`</span></span>
<span id="cb18-367"><a href="#cb18-367" aria-hidden="true" tabindex="-1"></a>      <span class="kw">FROM</span> <span class="st">`tabela_transactions`</span></span>
<span id="cb18-368"><a href="#cb18-368" aria-hidden="true" tabindex="-1"></a>      <span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="st">`tabela_user`</span></span>
<span id="cb18-369"><a href="#cb18-369" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ON</span> (<span class="st">`tabela_transactions`</span><span class="ch">.</span><span class="st">`user_id`</span> <span class="op">=</span> <span class="st">`tabela_user`</span><span class="ch">.</span><span class="st">`id`</span>)</span>
<span id="cb18-370"><a href="#cb18-370" aria-hidden="true" tabindex="-1"></a>    ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-371"><a href="#cb18-371" aria-hidden="true" tabindex="-1"></a>  ) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-372"><a href="#cb18-372" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> (<span class="st">`tres_n`</span> <span class="op">=</span> <span class="fl">1.0</span>)</span>
<span id="cb18-373"><a href="#cb18-373" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> <span class="st">`q01`</span></span>
<span id="cb18-374"><a href="#cb18-374" aria-hidden="true" tabindex="-1"></a>WINDOW <span class="st">`win1`</span> <span class="kw">AS</span> (PARTITION <span class="kw">BY</span> <span class="st">`pais`</span>, <span class="st">`transaction_state`</span>)</span>
<span id="cb18-375"><a href="#cb18-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-376"><a href="#cb18-376" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-377"><a href="#cb18-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-378"><a href="#cb18-378" aria-hidden="true" tabindex="-1"></a><span class="fu"># Tarefa 02: Python</span></span>
<span id="cb18-379"><a href="#cb18-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-382"><a href="#cb18-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-383"><a href="#cb18-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-384"><a href="#cb18-384" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb18-385"><a href="#cb18-385" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-386"><a href="#cb18-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-387"><a href="#cb18-387" aria-hidden="true" tabindex="-1"></a>Numa tribo ancestral e muito desenvolvida, orientada principalmente por uma cultura lógica e matemática, os nativos estão interessados no estudo das linguagens de outras tribos e civilizações.</span>
<span id="cb18-388"><a href="#cb18-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-389"><a href="#cb18-389" aria-hidden="true" tabindex="-1"></a>Durante seus estudos, estes perceberam que as linguagens dessas outras civilizações são compostas por um conjunto de símbolos (letras do alfabeto) que são agrupados e combinados para representar conceitos (palavras). Assim mesmo, estes também sabem que cada civilização possui um alfabeto específico.</span>
<span id="cb18-390"><a href="#cb18-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-391"><a href="#cb18-391" aria-hidden="true" tabindex="-1"></a>Na tentativa da tribo de avançar nos seus estudos, estes desejam saber qual seria o número de palavras possíveis a serem criadas em função do tamanho da palavra e o conjunto de símbolos (alfabeto) da civilização em estudo, independentemente se essas "palavras" representam algum significado ou não.</span>
<span id="cb18-392"><a href="#cb18-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-393"><a href="#cb18-393" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb18-394"><a href="#cb18-394" aria-hidden="true" tabindex="-1"></a><span class="fu"># A</span></span>
<span id="cb18-395"><a href="#cb18-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-396"><a href="#cb18-396" aria-hidden="true" tabindex="-1"></a>Você, que compartilha os atributos da tribo enquanto as capacidades analíticas e lógicas, precisa ajudá-la escrevendo um algoritmo para fazer o cálculo descrito acima, considerando que tribo oferecerá para você o alfabeto da civilização e o tamanho da palavra/combinação. Seu algoritmo deveria ser capaz de calcular que o número total de palavras possíveis (independente se tem significado ou não) é de 16.</span>
<span id="cb18-397"><a href="#cb18-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-398"><a href="#cb18-398" aria-hidden="true" tabindex="-1"></a>OBS: NÃO PRECISA ESCREVER A LISTA DAS PALAVRAS, A TRIBO SÓ PRECISA DO NÚMERO!</span>
<span id="cb18-399"><a href="#cb18-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-400"><a href="#cb18-400" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-401"><a href="#cb18-401" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-402"><a href="#cb18-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-403"><a href="#cb18-403" aria-hidden="true" tabindex="-1"></a>Esse é um claro problema de análise combinatória com reposição/reposição.</span>
<span id="cb18-404"><a href="#cb18-404" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-405"><a href="#cb18-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-408"><a href="#cb18-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb18-409"><a href="#cb18-409" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement,chain</span>
<span id="cb18-410"><a href="#cb18-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-411"><a href="#cb18-411" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtem todas as combinações de [1, 2, 3] e tamanho 2</span></span>
<span id="cb18-412"><a href="#cb18-412" aria-hidden="true" tabindex="-1"></a>comb_A <span class="op">=</span> combinations_with_replacement([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">2</span>)</span>
<span id="cb18-413"><a href="#cb18-413" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(<span class="bu">list</span>(comb_A)))</span>
<span id="cb18-414"><a href="#cb18-414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-415"><a href="#cb18-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-416"><a href="#cb18-416" aria-hidden="true" tabindex="-1"></a><span class="fu"># B</span></span>
<span id="cb18-417"><a href="#cb18-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-418"><a href="#cb18-418" aria-hidden="true" tabindex="-1"></a>Para ajudar a tribo ainda mais! Você deverá modificar seu algoritmo (ou talvez escrever um novo) para fazer o mesmo cálculo, só que agora, as palavras não podem ter símbolos repetidos.</span>
<span id="cb18-419"><a href="#cb18-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-420"><a href="#cb18-420" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-421"><a href="#cb18-421" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-422"><a href="#cb18-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-423"><a href="#cb18-423" aria-hidden="true" tabindex="-1"></a>Esse também é um claro problema de análise combinatória, mas, nesse caso, é um problema em que **não há reposição**.</span>
<span id="cb18-424"><a href="#cb18-424" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-425"><a href="#cb18-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-428"><a href="#cb18-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb18-429"><a href="#cb18-429" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb18-430"><a href="#cb18-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-431"><a href="#cb18-431" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtem todas as permutações de {@,d,2,b}  </span></span>
<span id="cb18-432"><a href="#cb18-432" aria-hidden="true" tabindex="-1"></a>comb_B <span class="op">=</span> combinations([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">2</span>)</span>
<span id="cb18-433"><a href="#cb18-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-434"><a href="#cb18-434" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(<span class="bu">list</span>(comb_B)))</span>
<span id="cb18-435"><a href="#cb18-435" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-436"><a href="#cb18-436" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-437"><a href="#cb18-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-438"><a href="#cb18-438" aria-hidden="true" tabindex="-1"></a><span class="fu"># Tarefa 03: Estatística e Machine Learning</span></span>
<span id="cb18-439"><a href="#cb18-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-440"><a href="#cb18-440" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb18-441"><a href="#cb18-441" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1</span></span>
<span id="cb18-442"><a href="#cb18-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-443"><a href="#cb18-443" aria-hidden="true" tabindex="-1"></a>Dado um dataset das estaturas (em centímetros) de 13 indivíduos:</span>
<span id="cb18-444"><a href="#cb18-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-445"><a href="#cb18-445" aria-hidden="true" tabindex="-1"></a>Dataset = {175, 166, 183, 193, 155, 177, 173, 171, 162, 185, 176, 161, 188}</span>
<span id="cb18-446"><a href="#cb18-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-447"><a href="#cb18-447" aria-hidden="true" tabindex="-1"></a>Calcule:</span>
<span id="cb18-448"><a href="#cb18-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-449"><a href="#cb18-449" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>a média</span>
<span id="cb18-450"><a href="#cb18-450" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>a mediana</span>
<span id="cb18-451"><a href="#cb18-451" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>20 percentil</span>
<span id="cb18-452"><a href="#cb18-452" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>80 percentil</span>
<span id="cb18-453"><a href="#cb18-453" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>desvio padrão</span>
<span id="cb18-454"><a href="#cb18-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-455"><a href="#cb18-455" aria-hidden="true" tabindex="-1"></a>Considerando os dados, responda a que distribuição (paramétrica) os dados se aproximam.</span>
<span id="cb18-456"><a href="#cb18-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-457"><a href="#cb18-457" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-458"><a href="#cb18-458" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-459"><a href="#cb18-459" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-460"><a href="#cb18-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-463"><a href="#cb18-463" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-464"><a href="#cb18-464" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-465"><a href="#cb18-465" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb18-466"><a href="#cb18-466" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">~</span>altura, </span>
<span id="cb18-467"><a href="#cb18-467" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">175</span>,</span>
<span id="cb18-468"><a href="#cb18-468" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">166</span>,</span>
<span id="cb18-469"><a href="#cb18-469" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">183</span>,</span>
<span id="cb18-470"><a href="#cb18-470" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">193</span>,</span>
<span id="cb18-471"><a href="#cb18-471" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">155</span>,</span>
<span id="cb18-472"><a href="#cb18-472" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">177</span>,</span>
<span id="cb18-473"><a href="#cb18-473" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">173</span>,</span>
<span id="cb18-474"><a href="#cb18-474" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">171</span>,</span>
<span id="cb18-475"><a href="#cb18-475" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">162</span>,</span>
<span id="cb18-476"><a href="#cb18-476" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">185</span>, </span>
<span id="cb18-477"><a href="#cb18-477" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">176</span>, </span>
<span id="cb18-478"><a href="#cb18-478" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">161</span>, </span>
<span id="cb18-479"><a href="#cb18-479" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">188</span>,</span>
<span id="cb18-480"><a href="#cb18-480" aria-hidden="true" tabindex="-1"></a>                         )</span>
<span id="cb18-481"><a href="#cb18-481" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-482"><a href="#cb18-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-485"><a href="#cb18-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-486"><a href="#cb18-486" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-487"><a href="#cb18-487" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-488"><a href="#cb18-488" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-489"><a href="#cb18-489" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb18-490"><a href="#cb18-490" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb18-491"><a href="#cb18-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-492"><a href="#cb18-492" aria-hidden="true" tabindex="-1"></a>summarise_dataset <span class="ot">&lt;-</span> dataset <span class="sc">%&gt;%</span> </span>
<span id="cb18-493"><a href="#cb18-493" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">vinte_percentil =</span> <span class="fu">quantile</span>(altura, <span class="at">probs =</span> <span class="fl">0.20</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-494"><a href="#cb18-494" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mean =</span> <span class="fu">mean</span>(altura, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-495"><a href="#cb18-495" aria-hidden="true" tabindex="-1"></a>                   <span class="at">median =</span> <span class="fu">median</span>(altura, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-496"><a href="#cb18-496" aria-hidden="true" tabindex="-1"></a>                   <span class="at">oitenta_percentil =</span> <span class="fu">quantile</span>(altura, <span class="at">probs =</span> <span class="fl">0.80</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-497"><a href="#cb18-497" aria-hidden="true" tabindex="-1"></a>                   <span class="at">desvio_padrao =</span> <span class="fu">sd</span>(altura, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-498"><a href="#cb18-498" aria-hidden="true" tabindex="-1"></a>                   ) </span>
<span id="cb18-499"><a href="#cb18-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-500"><a href="#cb18-500" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(summarise_dataset)</span>
<span id="cb18-501"><a href="#cb18-501" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-502"><a href="#cb18-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-503"><a href="#cb18-503" aria-hidden="true" tabindex="-1"></a>De acordo com o gráfico abaixo, a distribuição da variável **altura** pode ser descrita por uma normal, mas para fins de decisão, deve-se munir de testes paramétricos ou não paramétricos. Veja que sua variabilidade indica que os valores observados tendem a estar distantes da média – ou seja, a distribuição é mais “espalhada”.</span>
<span id="cb18-504"><a href="#cb18-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-507"><a href="#cb18-507" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-508"><a href="#cb18-508" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-509"><a href="#cb18-509" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-510"><a href="#cb18-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-511"><a href="#cb18-511" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(dataset) <span class="sc">+</span></span>
<span id="cb18-512"><a href="#cb18-512" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> altura) <span class="sc">+</span></span>
<span id="cb18-513"><a href="#cb18-513" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">adjust =</span> <span class="dv">1</span>L, <span class="at">fill =</span> <span class="st">"#EF562D"</span>) <span class="sc">+</span></span>
<span id="cb18-514"><a href="#cb18-514" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Altura (cm)"</span>, </span>
<span id="cb18-515"><a href="#cb18-515" aria-hidden="true" tabindex="-1"></a>                <span class="at">title =</span> <span class="st">"Densidade: Altura (cm)"</span>) <span class="sc">+</span></span>
<span id="cb18-516"><a href="#cb18-516" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">174.23</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-517"><a href="#cb18-517" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">174.23</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-518"><a href="#cb18-518" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">175</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-519"><a href="#cb18-519" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">163.6</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-520"><a href="#cb18-520" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">184.2</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb18-521"><a href="#cb18-521" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-522"><a href="#cb18-522" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_gray</span>()</span>
<span id="cb18-523"><a href="#cb18-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-524"><a href="#cb18-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-527"><a href="#cb18-527" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-528"><a href="#cb18-528" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(dataset<span class="sc">$</span>altura)</span>
<span id="cb18-529"><a href="#cb18-529" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(dataset<span class="sc">$</span>altura, <span class="at">col=</span><span class="dv">2</span>)</span>
<span id="cb18-530"><a href="#cb18-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-531"><a href="#cb18-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-532"><a href="#cb18-532" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2</span></span>
<span id="cb18-533"><a href="#cb18-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-534"><a href="#cb18-534" aria-hidden="true" tabindex="-1"></a>Com suas próprias palavras, explique em que consiste o teorema central do limite, e se possível, mencione a sua importância no campo da inferência estatística.</span>
<span id="cb18-535"><a href="#cb18-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-536"><a href="#cb18-536" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-537"><a href="#cb18-537" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-538"><a href="#cb18-538" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-539"><a href="#cb18-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-540"><a href="#cb18-540" aria-hidden="true" tabindex="-1"></a>O Teorema do limite central (TLC) basicamente demonstra a **tendência** de aproximação das variáveis aleatórias com a distribuição normal, em que a aproximação da distribuição Normal melhora na medida que se fizesse a média do lançamento de mais dados. Esse comportamento pode ser visualizado na imagem abaixo. Na estatística, há provas que um n igual a 30 é suficientemente grande para que essa amostra seja descrita com uma distribuição normal e, por isso, é fácil encontrar análises clássicas com todos os pressupostos violados por seus pesquisadores devido a esta pressuposição do n igual a 30.</span>
<span id="cb18-541"><a href="#cb18-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-542"><a href="#cb18-542" aria-hidden="true" tabindex="-1"></a><span class="al">![Teorema do Limite Central](img/img213.png)</span>{fig-align="center" width="300"}</span>
<span id="cb18-543"><a href="#cb18-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-544"><a href="#cb18-544" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3</span></span>
<span id="cb18-545"><a href="#cb18-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-546"><a href="#cb18-546" aria-hidden="true" tabindex="-1"></a>Suponha que numa escola, 2 grupos diferentes de estudantes (Grupo A e Grupo B) fazem o mesmo teste de matemáticas. As pontuações para cada grupo são dados pelos seguintes datasets:</span>
<span id="cb18-547"><a href="#cb18-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-548"><a href="#cb18-548" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Grupo A: {80, 85, 88, 90, 92, 75, 78}</span>
<span id="cb18-549"><a href="#cb18-549" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Grupo B: {75, 78, 82, 85, 87, 93, 99}</span>
<span id="cb18-550"><a href="#cb18-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-551"><a href="#cb18-551" aria-hidden="true" tabindex="-1"></a>Elabore um teste de hipótese para determinar se existe uma diferença estatisticamente significativa entre a média das pontuações dos dois grupos com uma confiança de 95%.</span>
<span id="cb18-552"><a href="#cb18-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-553"><a href="#cb18-553" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-554"><a href="#cb18-554" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-555"><a href="#cb18-555" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-556"><a href="#cb18-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-559"><a href="#cb18-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-560"><a href="#cb18-560" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-561"><a href="#cb18-561" aria-hidden="true" tabindex="-1"></a>tabela_estudantes <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb18-562"><a href="#cb18-562" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">~</span>nota, <span class="sc">~</span>grupo, </span>
<span id="cb18-563"><a href="#cb18-563" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">80</span>, <span class="st">"A"</span>, </span>
<span id="cb18-564"><a href="#cb18-564" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">85</span>, <span class="st">"A"</span>,</span>
<span id="cb18-565"><a href="#cb18-565" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">88</span>, <span class="st">"A"</span>,</span>
<span id="cb18-566"><a href="#cb18-566" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">90</span>, <span class="st">"A"</span>,</span>
<span id="cb18-567"><a href="#cb18-567" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">92</span>, <span class="st">"A"</span>,</span>
<span id="cb18-568"><a href="#cb18-568" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">75</span>, <span class="st">"A"</span>,</span>
<span id="cb18-569"><a href="#cb18-569" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">78</span>, <span class="st">"A"</span>,</span>
<span id="cb18-570"><a href="#cb18-570" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">75</span>, <span class="st">"B"</span>,</span>
<span id="cb18-571"><a href="#cb18-571" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">78</span>, <span class="st">"B"</span>,</span>
<span id="cb18-572"><a href="#cb18-572" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">82</span>, <span class="st">"B"</span>,</span>
<span id="cb18-573"><a href="#cb18-573" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">85</span>, <span class="st">"B"</span>,</span>
<span id="cb18-574"><a href="#cb18-574" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">87</span>, <span class="st">"B"</span>,</span>
<span id="cb18-575"><a href="#cb18-575" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">93</span>, <span class="st">"B"</span>,</span>
<span id="cb18-576"><a href="#cb18-576" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">99</span>, <span class="st">"B"</span>,</span>
<span id="cb18-577"><a href="#cb18-577" aria-hidden="true" tabindex="-1"></a>                         ) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">grupo =</span> <span class="fu">factor</span>(grupo, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>)))</span>
<span id="cb18-578"><a href="#cb18-578" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-579"><a href="#cb18-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-580"><a href="#cb18-580" aria-hidden="true" tabindex="-1"></a>**Antes de qualquer levantamento de hipótese, é bom analisar as medidas de tendência central de cada grupo e também graficamente** e, de acordo com a tabela abaixo, não há muitas evidências de que essa média entre os grupos seja diferente, mas é evidente que o **grupo B** tem uma variabilidade maior em relação as notas (desvio padrão = 8.363754).</span>
<span id="cb18-581"><a href="#cb18-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-584"><a href="#cb18-584" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-585"><a href="#cb18-585" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-586"><a href="#cb18-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-587"><a href="#cb18-587" aria-hidden="true" tabindex="-1"></a>summarise_estudantes <span class="ot">&lt;-</span> tabela_estudantes <span class="sc">%&gt;%</span> </span>
<span id="cb18-588"><a href="#cb18-588" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(grupo) <span class="sc">%&gt;%</span> </span>
<span id="cb18-589"><a href="#cb18-589" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">vinte_percentil =</span> <span class="fu">quantile</span>(nota, <span class="at">probs =</span> <span class="fl">0.20</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-590"><a href="#cb18-590" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mean =</span> <span class="fu">round</span>(<span class="fu">mean</span>(nota, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),<span class="dv">2</span>),</span>
<span id="cb18-591"><a href="#cb18-591" aria-hidden="true" tabindex="-1"></a>                   <span class="at">median =</span> <span class="fu">median</span>(nota, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-592"><a href="#cb18-592" aria-hidden="true" tabindex="-1"></a>                   <span class="at">oitenta_percentil =</span> <span class="fu">quantile</span>(nota, <span class="at">probs =</span> <span class="fl">0.80</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-593"><a href="#cb18-593" aria-hidden="true" tabindex="-1"></a>                   <span class="at">desvio_padrao =</span> <span class="fu">round</span>(<span class="fu">sd</span>(nota, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),<span class="dv">2</span>)</span>
<span id="cb18-594"><a href="#cb18-594" aria-hidden="true" tabindex="-1"></a>                   ) </span>
<span id="cb18-595"><a href="#cb18-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-596"><a href="#cb18-596" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(summarise_dataset)</span>
<span id="cb18-597"><a href="#cb18-597" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-600"><a href="#cb18-600" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-601"><a href="#cb18-601" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-602"><a href="#cb18-602" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-603"><a href="#cb18-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-604"><a href="#cb18-604" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tabela_estudantes) <span class="sc">+</span></span>
<span id="cb18-605"><a href="#cb18-605" aria-hidden="true" tabindex="-1"></a> <span class="fu">aes</span>(<span class="at">x =</span> nota, <span class="at">y =</span> grupo, <span class="at">fill =</span> grupo) <span class="sc">+</span></span>
<span id="cb18-606"><a href="#cb18-606" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb18-607"><a href="#cb18-607" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="at">A =</span> <span class="st">"#FFF5EB"</span>, </span>
<span id="cb18-608"><a href="#cb18-608" aria-hidden="true" tabindex="-1"></a><span class="at">B =</span> <span class="st">"#E56B0D"</span>)) <span class="sc">+</span></span>
<span id="cb18-609"><a href="#cb18-609" aria-hidden="true" tabindex="-1"></a> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Nota"</span>, <span class="at">y =</span> <span class="st">"Grupo"</span>) <span class="sc">+</span></span>
<span id="cb18-610"><a href="#cb18-610" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme_gray</span>() <span class="sc">+</span></span>
<span id="cb18-611"><a href="#cb18-611" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>, <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, </span>
<span id="cb18-612"><a href="#cb18-612" aria-hidden="true" tabindex="-1"></a> <span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb18-613"><a href="#cb18-613" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-614"><a href="#cb18-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-615"><a href="#cb18-615" aria-hidden="true" tabindex="-1"></a>É importante ressaltar que a verificação dos pressupostos é de extrema relevância para que os insights e conclusões sejam verdadeiramente corretos. Neste casso, estamos **supondo ** que as duas amostras são independentes e, em caso de teste de médias, usaríamos o teste t independente que apresenta dois **pressupostos**:</span>
<span id="cb18-616"><a href="#cb18-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-617"><a href="#cb18-617" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Normalidade da variável dependente de cada grupo**</span>
<span id="cb18-618"><a href="#cb18-618" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Homogeneidade de variâncias (ou seja, grupos com variâncias homogêneas)**</span>
<span id="cb18-619"><a href="#cb18-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-620"><a href="#cb18-620" aria-hidden="true" tabindex="-1"></a><span class="fu">### Normalidade</span></span>
<span id="cb18-621"><a href="#cb18-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-622"><a href="#cb18-622" aria-hidden="true" tabindex="-1"></a>Para verificar a normalidade dos dados, é recomendável utilizar o teste de **Shapiro WIlk** quando o número de amostra é menor que 50. A estatı́stica T (ou T ) é basicamente o quadrado de um coeficiente de correlação, onde o coeficiente de correlação de Pearson é calculado entre a estatı́stica ordenada X i na amostra e o escore ai , que representa o que a estatı́stica ordenada deveria parecer se a população é Normal. Portanto, as hipóteses levantadas são:</span>
<span id="cb18-623"><a href="#cb18-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-624"><a href="#cb18-624" aria-hidden="true" tabindex="-1"></a>$H_{0}$ : F(x) é função de distribuição normal;</span>
<span id="cb18-625"><a href="#cb18-625" aria-hidden="true" tabindex="-1"></a>$H_{1}$ : F(x) não é função de distribuição normal;</span>
<span id="cb18-626"><a href="#cb18-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-629"><a href="#cb18-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-630"><a href="#cb18-630" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-631"><a href="#cb18-631" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb18-632"><a href="#cb18-632" aria-hidden="true" tabindex="-1"></a>teste_shapiro <span class="ot">&lt;-</span> tabela_estudantes <span class="sc">%&gt;%</span> </span>
<span id="cb18-633"><a href="#cb18-633" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(grupo) <span class="sc">%&gt;%</span> </span>
<span id="cb18-634"><a href="#cb18-634" aria-hidden="true" tabindex="-1"></a>  rstatix<span class="sc">::</span><span class="fu">shapiro_test</span>(nota)</span>
<span id="cb18-635"><a href="#cb18-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-636"><a href="#cb18-636" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(teste_shapiro)</span>
<span id="cb18-637"><a href="#cb18-637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-638"><a href="#cb18-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-639"><a href="#cb18-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-640"><a href="#cb18-640" aria-hidden="true" tabindex="-1"></a>Veja que de acordo com o teste de Shapiro Wilk, ao nível de 95% de significância, **não rejeita-se a hipótese nula**, ou seja, a variável **notas** é descrita por uma distribuição normal.</span>
<span id="cb18-641"><a href="#cb18-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-642"><a href="#cb18-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-643"><a href="#cb18-643" aria-hidden="true" tabindex="-1"></a><span class="fu">### Variância</span></span>
<span id="cb18-644"><a href="#cb18-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-645"><a href="#cb18-645" aria-hidden="true" tabindex="-1"></a>O segundo pressuposto pode ser avaliado pelo **teste de Levene**, em que as hipóteses são:</span>
<span id="cb18-646"><a href="#cb18-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-647"><a href="#cb18-647" aria-hidden="true" tabindex="-1"></a>$H_{0}$ : Os grupos apresentam variâncias homogêneas;</span>
<span id="cb18-648"><a href="#cb18-648" aria-hidden="true" tabindex="-1"></a>$H_{1}$ : Os grupos não apresentam variâncias homogêneas;</span>
<span id="cb18-649"><a href="#cb18-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-652"><a href="#cb18-652" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-653"><a href="#cb18-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-654"><a href="#cb18-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-655"><a href="#cb18-655" aria-hidden="true" tabindex="-1"></a>teste_levene <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">leveneTest</span>(nota <span class="sc">~</span> grupo, <span class="at">data =</span> tabela_estudantes, <span class="at">center =</span> mean)</span>
<span id="cb18-656"><a href="#cb18-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-657"><a href="#cb18-657" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(teste_levene)</span>
<span id="cb18-658"><a href="#cb18-658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-659"><a href="#cb18-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-660"><a href="#cb18-660" aria-hidden="true" tabindex="-1"></a>Logo, ao nível de 95% de significância, **não rejeitamos a hipótese nula**, ou seja, os grupos apresentam variâncias homogêneas e assim podemos seguir com o teste t independente.</span>
<span id="cb18-661"><a href="#cb18-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-662"><a href="#cb18-662" aria-hidden="true" tabindex="-1"></a>Seguindo os passos para elaboração de um teste de hipótese:</span>
<span id="cb18-663"><a href="#cb18-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-664"><a href="#cb18-664" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Enunciar as Hipóteses:</span>
<span id="cb18-665"><a href="#cb18-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-666"><a href="#cb18-666" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$H_{0}$ : Não há diferença média entre os grupos; </span>
<span id="cb18-667"><a href="#cb18-667" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$H_{1}$ : Há diferença média entre os grupos;</span>
<span id="cb18-668"><a href="#cb18-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-669"><a href="#cb18-669" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Fixar o nı́vel de significância $\alpha$) do teste:</span>
<span id="cb18-670"><a href="#cb18-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-671"><a href="#cb18-671" aria-hidden="true" tabindex="-1"></a>**No nosso caso, o nível de significância será 95%.**</span>
<span id="cb18-672"><a href="#cb18-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-673"><a href="#cb18-673" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$\alpha$ : Erro tipo I: Rejeitar $H_{0}$  quando é verdadeira.</span>
<span id="cb18-674"><a href="#cb18-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-675"><a href="#cb18-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-676"><a href="#cb18-676" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Escolha da Estatı́stica teste adequada:</span>
<span id="cb18-677"><a href="#cb18-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-678"><a href="#cb18-678" aria-hidden="true" tabindex="-1"></a>Para responder a essa pergunta, usaremos o teste-t independente. Note que queremos comparar as notas (variáveis numéricas) de dois grupos independentes de alunos (A x B).</span>
<span id="cb18-679"><a href="#cb18-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-680"><a href="#cb18-680" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Obtenção dos valores crı́ticos e Obtenção da Estatı́stica calculada:</span>
<span id="cb18-681"><a href="#cb18-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-684"><a href="#cb18-684" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-685"><a href="#cb18-685" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-686"><a href="#cb18-686" aria-hidden="true" tabindex="-1"></a>teste_t <span class="ot">&lt;-</span> stats<span class="sc">::</span><span class="fu">t.test</span>(nota <span class="sc">~</span> grupo, tabela_estudantes, <span class="at">var.equal=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-687"><a href="#cb18-687" aria-hidden="true" tabindex="-1"></a>teste_t</span>
<span id="cb18-688"><a href="#cb18-688" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-689"><a href="#cb18-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-690"><a href="#cb18-690" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Conclusão e tomada de decisão</span>
<span id="cb18-691"><a href="#cb18-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-692"><a href="#cb18-692" aria-hidden="true" tabindex="-1"></a>O teste resulta em um valor de t (no caso, t = -0.3935) e um valor de p (p-value) que é calculado com base nesse valor de t e nos graus de liberdade (df, do inglês degrees of freedom). Nesse caso, o valor de p é: 0.7008, um valor superior ao nível de significância 0.05. Como p &gt; 0.05, não vamos rejeitar a $H_{0}$ e considerar que os dois grupos que apresentam notas, em média, não são estatisticamente diferentes. Veja que o IC 95% para a diferença entre médias inclui o zero: <span class="co">[</span><span class="ot">-10.27; 7.12</span><span class="co">]</span>.</span>
<span id="cb18-693"><a href="#cb18-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-694"><a href="#cb18-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-695"><a href="#cb18-695" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4</span></span>
<span id="cb18-696"><a href="#cb18-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-697"><a href="#cb18-697" aria-hidden="true" tabindex="-1"></a>Determine a hipótese nula (Ho) e hipótese alternativa (Ha) do seguinte cenário: Uma empresa afirma que o tempo médio dos seus produtos é menos de 4 dias. Você, conta com uma amostra dessas entregas para validar estadísticamente essa afirmação.</span>
<span id="cb18-698"><a href="#cb18-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-699"><a href="#cb18-699" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-700"><a href="#cb18-700" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-701"><a href="#cb18-701" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-702"><a href="#cb18-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-703"><a href="#cb18-703" aria-hidden="true" tabindex="-1"></a>Não é possível avaliar os pressupostos dessa amostra, mas considerando que esse tempo médio seja em dias (inteiros), o teste paramétrico sobre uma média populacional, a hipótese nula utilizada seria:</span>
<span id="cb18-704"><a href="#cb18-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-705"><a href="#cb18-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-706"><a href="#cb18-706" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$H_{0}$ : $\mu$ = 4;</span>
<span id="cb18-707"><a href="#cb18-707" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$H_{1}$ : $\mu$ $\neq$ 4;</span>
<span id="cb18-708"><a href="#cb18-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-709"><a href="#cb18-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-710"><a href="#cb18-710" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5</span></span>
<span id="cb18-711"><a href="#cb18-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-712"><a href="#cb18-712" aria-hidden="true" tabindex="-1"></a>Calcule o coeficiente de correlação de pearson das variáveis "Número de aparições Zendaya em filmes por ano" e "Número de pessoas afogadas em piscinas no Brasil ao ano". Em base nos seus resultados, considera que a variável "Número de aparições Zendaya em filmes por ano" é um bom preditor do número de pessoas afogadas no Brasil? Justifique a sua resposta.</span>
<span id="cb18-713"><a href="#cb18-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-714"><a href="#cb18-714" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-715"><a href="#cb18-715" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-716"><a href="#cb18-716" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-717"><a href="#cb18-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-720"><a href="#cb18-720" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-721"><a href="#cb18-721" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb18-722"><a href="#cb18-722" aria-hidden="true" tabindex="-1"></a>tabela_5 <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb18-723"><a href="#cb18-723" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">~</span>ano, <span class="sc">~</span>zendaya, <span class="sc">~</span>piscina, </span>
<span id="cb18-724"><a href="#cb18-724" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2015"</span>, <span class="st">"4"</span>, <span class="st">"107"</span>,</span>
<span id="cb18-725"><a href="#cb18-725" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2016"</span>, <span class="st">"7"</span>, <span class="st">"146"</span>,</span>
<span id="cb18-726"><a href="#cb18-726" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2017"</span>, <span class="st">"16"</span>, <span class="st">"178"</span>,</span>
<span id="cb18-727"><a href="#cb18-727" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2018"</span>, <span class="st">"21"</span>, <span class="st">"199"</span>,</span>
<span id="cb18-728"><a href="#cb18-728" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2019"</span>, <span class="st">"26"</span>, <span class="st">"221"</span>,</span>
<span id="cb18-729"><a href="#cb18-729" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2020"</span>, <span class="st">"2"</span>, <span class="st">"114"</span>,</span>
<span id="cb18-730"><a href="#cb18-730" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2021"</span>, <span class="st">"6"</span>, <span class="st">"133"</span>,</span>
<span id="cb18-731"><a href="#cb18-731" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2022"</span>, <span class="st">"12"</span>, <span class="st">"159"</span>,</span>
<span id="cb18-732"><a href="#cb18-732" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2023"</span>, <span class="st">"16"</span>, <span class="st">"183"</span>,</span>
<span id="cb18-733"><a href="#cb18-733" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"2024"</span>, <span class="st">"32"</span>, <span class="st">"215"</span>,</span>
<span id="cb18-734"><a href="#cb18-734" aria-hidden="true" tabindex="-1"></a>                         ) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">zendaya =</span> base<span class="sc">::</span><span class="fu">as.numeric</span>(zendaya),</span>
<span id="cb18-735"><a href="#cb18-735" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">piscina =</span> base<span class="sc">::</span><span class="fu">as.numeric</span>(piscina),</span>
<span id="cb18-736"><a href="#cb18-736" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">ano =</span> <span class="fu">as.factor</span>(ano))</span>
<span id="cb18-737"><a href="#cb18-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-738"><a href="#cb18-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-739"><a href="#cb18-739" aria-hidden="true" tabindex="-1"></a>A correlação entre duas variáveis pode ser verificada utilizando o teste de Pearson, caso há a suposição de normalidade nos dados. No caso em que a suposição de normalidade não é considerada ou a caracterı́stica dos próprio dados pressupõe isto (escala no mı́nimo ordinal), então pode-se fazer uso de estatı́sticas alternativas como: Teste de correlação por postos de Spearman ou de Kendall.</span>
<span id="cb18-740"><a href="#cb18-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-741"><a href="#cb18-741" aria-hidden="true" tabindex="-1"></a>Veja que de acordo com o gráfico abaixo que o "Número de aparições Zendaya em filmes por ano" e o "Número de pessoas afogadas em piscinas no Brasil ao ano" estão altamente correlacionados, mas faz senido essa correlçao?</span>
<span id="cb18-742"><a href="#cb18-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-743"><a href="#cb18-743" aria-hidden="true" tabindex="-1"></a>Na estatística, o nome que damos a essa correlação é **correlação espúria**. Uma correlação espúria é uma relação aparente entre duas variáveis que não possuem uma conexão causal real entre si. Essa relação ilusória pode surgir devido a fatores externos ou coincidências estatísticas, levando a conclusões equivocadas se não forem adequadamente analisadas.</span>
<span id="cb18-744"><a href="#cb18-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-747"><a href="#cb18-747" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-748"><a href="#cb18-748" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb18-749"><a href="#cb18-749" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(tabela_5[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">lower =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">"smooth"</span>))</span>
<span id="cb18-750"><a href="#cb18-750" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-751"><a href="#cb18-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-752"><a href="#cb18-752" aria-hidden="true" tabindex="-1"></a>A hipótese levantada é:</span>
<span id="cb18-753"><a href="#cb18-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-754"><a href="#cb18-754" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$H_{0}$ : $\rho$ = 0;</span>
<span id="cb18-755"><a href="#cb18-755" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>$H_{1}$ : $\rho$ $\neq$ 0;</span>
<span id="cb18-756"><a href="#cb18-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-757"><a href="#cb18-757" aria-hidden="true" tabindex="-1"></a>Vamos considerar o nível de significância a 95%. O teste de correção de Pearson é dados por,</span>
<span id="cb18-758"><a href="#cb18-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-761"><a href="#cb18-761" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb18-762"><a href="#cb18-762" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">cor.test</span>(tabela_5<span class="sc">$</span>zendaya, tabela_5<span class="sc">$</span>piscina,</span>
<span id="cb18-763"><a href="#cb18-763" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb18-764"><a href="#cb18-764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb18-765"><a href="#cb18-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-766"><a href="#cb18-766" aria-hidden="true" tabindex="-1"></a>Ou seja, ao nível de 95% de significância, há correlação entre as variáveis analisadas, como explicado acima, essa correlação é denominada por correlação espúria.</span>
<span id="cb18-767"><a href="#cb18-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-768"><a href="#cb18-768" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6</span></span>
<span id="cb18-769"><a href="#cb18-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-770"><a href="#cb18-770" aria-hidden="true" tabindex="-1"></a>Explique a diferença entre amostragem estratificada e amostragem randômica ou aleatória. Discuta quais são as vantagens e desvantagens de cada uma e dê exemplos de casos onde uma abordagem é mais adequada que a outra.</span>
<span id="cb18-771"><a href="#cb18-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-772"><a href="#cb18-772" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-773"><a href="#cb18-773" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-774"><a href="#cb18-774" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-775"><a href="#cb18-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-776"><a href="#cb18-776" aria-hidden="true" tabindex="-1"></a>A **amostragem aleatória simples** é um método de seleção de n unidades de N, de modo que cada uma das $C_{n}$ amostras distintas tenha uma chance igual de ser sorteada. Na prática, uma amostra aleatória simples é extraída unidade por unidade. As unidades da população são numeradas de 1 a N. Uma série de números aleatórios entre 1 e N é então sorteada, seja por meio de uma tabela de números aleatórios ou por meio de um programa de computador que produz tal tabela. Em qualquer sorteio o processo utilizado deve dar uma chance igual de seleção a qualquer número da população ainda não sorteado. As unidades que contêm esses n números constituem a amostra. É facilmente verificado que todas as amostras distintas de $C_{n}$ têm chances iguais de serem selecionadas por este método. Considere uma amostra distinta, ou seja, um conjunto de n unidades especificadas. No primeiro sorteio, a probabilidade de que alguma das n unidades especificadas seja selecionada é n/ N. No segundo sorteio, a probabilidade de que alguma das unidades especificadas restantes (n -1) seja sorteada é (n -1)/( N-1), e assim por diante.</span>
<span id="cb18-777"><a href="#cb18-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-778"><a href="#cb18-778" aria-hidden="true" tabindex="-1"></a>Como um número sorteado é removido da população em todos os sorteios subsequentes, esse método também é chamado de amostragem aleatória sem reposição. A amostragem aleatória com reposição é inteiramente viável: em qualquer sorteio, todos os N membros da população têm a mesma chance de serem sorteados, independentemente da frequência com que já tenham sido sorteados. As fórmulas para as variâncias e variâncias estimadas das estimativas feitas a partir da amostra são muitas vezes mais simples quando a amostragem é com reposição do que quando é sem reposição. Por esta razão, a amostragem com reposição é por vezes utilizada nos planos amostrais mais complexos, embora à primeira vista pareça pouco sentido ter a mesma unidade duas ou mais vezes na amostra.</span>
<span id="cb18-779"><a href="#cb18-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-780"><a href="#cb18-780" aria-hidden="true" tabindex="-1"></a>Na **amostragem estratificada**, a população de N unidades é primeiro dividida em subpopulações de unidades $N_{1}, N_{2}, \cdots, N_{L}$, respectivamente. Essas subpopulações não se sobrepõem e juntas compreendem toda a população, de modo que $N_{1} + N_{2} + \cdots + N_{L} = N$. As subpopulações são chamadas de estratos. Para obter todos os benefícios da estratificação, os valores do $N_{h}$ devem ser conhecidos. Determinados os estratos, de cada um é retirada uma amostra, sendo os sorteios feitos de forma independente nos diferentes estratos. Os tamanhos das amostras dentro dos estratos são indicados por $n_{1}, n_{2}, \cdots, n_{L}$ respectivamente. Se uma amostra aleatória simples for retirada em cada estrato, todo o procedimento é descrito como amostragem aleatória estratificada. A estratificação é uma técnica comum. Há muitas razões para isto, os principais são os seguintes.</span>
<span id="cb18-781"><a href="#cb18-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-782"><a href="#cb18-782" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Se forem necessários dados de precisão conhecida para certas subdivisões do população, é aconselhável tratar cada subdivisão como uma “população” por direito próprio.</span>
<span id="cb18-783"><a href="#cb18-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-784"><a href="#cb18-784" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Os problemas de amostragem podem diferir acentuadamente em diferentes partes da população. No caso das populações humanas, as pessoas que vivem em instituições (por exemplo, hotéis, hospitais, prisões) são frequentemente colocadas num estrato diferente das pessoas que vivem em casas normais porque uma abordagem diferente à amostragem é apropriada para as duas situações. Na amostragem de empresas, podemos possuir uma lista das grandes empresas, que são colocadas num estrato separado. Algum tipo de amostragem de área pode ter que ser usado para as empresas menores.</span>
<span id="cb18-785"><a href="#cb18-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-786"><a href="#cb18-786" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>A estratificação pode produzir um ganho de precisão nas estimativas das características de toda a população. Pode ser possível dividir uma população heterogênea em subpopulações, cada uma das quais internamente homogênea. Isto é sugerido pelo nome estratos, com a implicação de uma divisão em camadas. Se cada estrato for homogêneo, no sentido de que as medidas variam pouco de uma unidade para outra, uma estimativa precisa da média de qualquer estrato pode ser obtida a partir de uma pequena amostra desse estrato. Estas estimativas podem então ser combinadas numa estimativa precisa para toda a população.</span>
<span id="cb18-787"><a href="#cb18-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-788"><a href="#cb18-788" aria-hidden="true" tabindex="-1"></a><span class="fu"># 7</span></span>
<span id="cb18-789"><a href="#cb18-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-790"><a href="#cb18-790" aria-hidden="true" tabindex="-1"></a>Se você treina um modelo de Machine Learning (ou estadístico), como você identificaria se seu modelo tem uma alta variância (overfitting) ou um alto viés (bias, ou underfitting). Caso seu modelo apresenta alta variância, como você resolveria esse problema?</span>
<span id="cb18-791"><a href="#cb18-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-792"><a href="#cb18-792" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-793"><a href="#cb18-793" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-794"><a href="#cb18-794" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-795"><a href="#cb18-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-796"><a href="#cb18-796" aria-hidden="true" tabindex="-1"></a>Essa é uma questão de viés e variância em modelagem. Essa relação é fácil de ser observada na imagem abaixo.</span>
<span id="cb18-797"><a href="#cb18-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-798"><a href="#cb18-798" aria-hidden="true" tabindex="-1"></a><span class="al">![Andrew Ng](img/vies.jpeg)</span>{fig-align="center" width="300"}</span>
<span id="cb18-799"><a href="#cb18-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-800"><a href="#cb18-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-801"><a href="#cb18-801" aria-hidden="true" tabindex="-1"></a>A abordagem Bayesiana evita o overfitting, por mais que esse não seja necessariamente seu objetivo primordial, mas estamos condicionados a utilizar das formas ditas **regularizadoras**. Elas também chamadas de **penalizadoras** e são conhecidas por regressões LASSO e Ridge. É claro que a análise dos valores de VP, FN, VN e FP usando-se uma amostra de teste ou validação é crucial para evitar o overfitting, mas ainda assim, é importante estar atento a amostragem dos dados para compor a amostra de teste ou de validação.</span>
<span id="cb18-802"><a href="#cb18-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-803"><a href="#cb18-803" aria-hidden="true" tabindex="-1"></a>Acredito que deve haver vários outros métodos mais atualizados que esses mencionados acima, mas os básico as vezes já resolve o problema e também identifica a causa raiz, facilitando assim a procura de outros métodos ao invés de só ir aplicando vários métodos e escolher o que mais proporciona ganhos.</span>
<span id="cb18-804"><a href="#cb18-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-805"><a href="#cb18-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-806"><a href="#cb18-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-807"><a href="#cb18-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-808"><a href="#cb18-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-809"><a href="#cb18-809" aria-hidden="true" tabindex="-1"></a><span class="fu"># 8</span></span>
<span id="cb18-810"><a href="#cb18-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-811"><a href="#cb18-811" aria-hidden="true" tabindex="-1"></a>Considere o seguinte modelo de regressão:</span>
<span id="cb18-812"><a href="#cb18-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-813"><a href="#cb18-813" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Salário = 1200 + 500.Idade + 600.Têm Faculdade + 50.Têm Linkedin</span>
<span id="cb18-814"><a href="#cb18-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-815"><a href="#cb18-815" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb18-816"><a href="#cb18-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-817"><a href="#cb18-817" aria-hidden="true" tabindex="-1"></a><span class="fu"># A</span></span>
<span id="cb18-818"><a href="#cb18-818" aria-hidden="true" tabindex="-1"></a>Interprete o efeito da Idade na variável salário. </span>
<span id="cb18-819"><a href="#cb18-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-820"><a href="#cb18-820" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-821"><a href="#cb18-821" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-822"><a href="#cb18-822" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-823"><a href="#cb18-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-824"><a href="#cb18-824" aria-hidden="true" tabindex="-1"></a>Neste modelo, temos que a variável idade foi significativa (p-value = 0.023) com sinal positivo, ou seja, quanto maior a idade (aqui é importante ressaltar que se ela estiver categorizada, a interpretação é alterada), maior será a chance do Salário estar acima da média. Para este resultado é pertinente dizer que as empresas associam a idade a um bom salário, ou, assumem que quando o individuo é mais velho, este consequentemente deve ganhar mais em relação aos mais novos.</span>
<span id="cb18-825"><a href="#cb18-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-826"><a href="#cb18-826" aria-hidden="true" tabindex="-1"></a><span class="fu"># B</span></span>
<span id="cb18-827"><a href="#cb18-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-828"><a href="#cb18-828" aria-hidden="true" tabindex="-1"></a>Que acontece com as pessoas que não tem faculdade? </span>
<span id="cb18-829"><a href="#cb18-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-830"><a href="#cb18-830" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-831"><a href="#cb18-831" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-832"><a href="#cb18-832" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-833"><a href="#cb18-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-834"><a href="#cb18-834" aria-hidden="true" tabindex="-1"></a>A variável "Têm faculdade" foi significativa (p-value = 0.032) com sinal positivo, o que implica que esta variável auxilia no aumento do salário, em que quanto maior o seu nível de instrução, maior será a chance (600 vezes) do salário estar acima da média daqueles que não têm faculdade e isso pode ser recorrente ao fato desse indivíduo ter mais conhecimento sobre a área. Logo, de acordo com o modelo, aqueles que não têm faculdade estão propícios a receberem um salário abaixo da média em relação a aqueles que possuem faculdade.</span>
<span id="cb18-835"><a href="#cb18-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-836"><a href="#cb18-836" aria-hidden="true" tabindex="-1"></a><span class="fu"># C</span></span>
<span id="cb18-837"><a href="#cb18-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-838"><a href="#cb18-838" aria-hidden="true" tabindex="-1"></a>Considere agora que o desvio padrão do coeficiente da variável "Têm Linkedin" é de 47, por tanto o seu p-valor é 0.92 (como visto na equação abaixo). O que isso implica para o modelo em questão? Essa variável é relevante?</span>
<span id="cb18-839"><a href="#cb18-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-840"><a href="#cb18-840" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb18-841"><a href="#cb18-841" aria-hidden="true" tabindex="-1"></a><span class="fu"># Resposta</span></span>
<span id="cb18-842"><a href="#cb18-842" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-843"><a href="#cb18-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-844"><a href="#cb18-844" aria-hidden="true" tabindex="-1"></a>Essa variável não é relevante para predizer salários, mas veja que, apesar de não ser significativa, ela é positiva. Podemos iniciar com a problemática de que ter uma conta no linkedin não implica que seu salário será impactado por isso, mas podemos supor que o linkedin te ajuda positivamente em alguns aspectos, menos no salário. Aqui temos uma chance de analisar um pouco mais essa variável.</span>
<span id="cb18-845"><a href="#cb18-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-846"><a href="#cb18-846" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb18-847"><a href="#cb18-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-848"><a href="#cb18-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-849"><a href="#cb18-849" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copiar para a área de transferência" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>